
> lebensordner@1.0.0 test
> vitest


[1m[44m DEV [49m[22m [34mv3.2.4 [39m[90mD:/Projects/Lebensordner[39m

stderr | tests/lib/consent/manager.test.ts > consent manager > getCurrentConsent > should return latest consent for specific type
Failed to fetch current consent: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at Module.getCurrentConsent (D:\Projects\Lebensordner\src\lib\consent\manager.ts:89:8)
    at D:\Projects\Lebensordner\tests\lib\consent\manager.test.ts:112:28
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/lib/consent/manager.test.ts > consent manager > hasHealthDataConsent > should return true when health_data_consent_granted is true
Failed to fetch health data consent: TypeError: supabase.from(...).select(...).eq(...).single is not a function
    at Module.hasHealthDataConsent (D:\Projects\Lebensordner\src\lib\consent\manager.ts:113:8)
    at D:\Projects\Lebensordner\tests\lib\consent\manager.test.ts:128:28
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/lib/security/rate-limit.test.ts > rate-limit > checkRateLimit > should return allowed=true on database failure (fail-open)
Rate limit check failed: Error: DB connection failed
    at D:\Projects\Lebensordner\tests\lib\security\rate-limit.test.ts:99:40
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/lib/security/rate-limit.test.ts > rate-limit > incrementRateLimit > should handle database errors gracefully
Rate limit increment failed: Error: DB error
    at D:\Projects\Lebensordner\tests\lib\security\rate-limit.test.ts:125:40
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/lib/consent/manager.test.ts > consent manager > grantHealthDataConsent > should return {ok: false, error} on ledger insert failure
Failed to record health data consent: Error: ledger
    at D:\Projects\Lebensordner\tests\lib\consent\manager.test.ts:226:49
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/lib/security/rate-limit.test.ts > rate-limit > cleanupExpiredLimits > should handle database errors gracefully
Rate limit cleanup failed: Error: DB error
    at D:\Projects\Lebensordner\tests\lib\security\rate-limit.test.ts:144:42
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
stderr | tests/lib/consent/manager.test.ts > consent manager > withdrawHealthDataConsent > should return {ok: false, error} on failure
Failed to record health data withdrawal: Error: fail
    at D:\Projects\Lebensordner\tests\lib\consent\manager.test.ts:278:49
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
stderr | tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Unlock then successful login > should allow login after account is unlocked
[AUTH] Login error: Error: `cookies` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context
    at throwForMissingRequestStore (D:\Projects\Lebensordner\node_modules\next\src\server\app-render\work-unit-async-storage.external.ts:343:9)
    at cookies (D:\Projects\Lebensordner\node_modules\next\src\server\request\cookies.ts:141:30)
    at Module.POST (D:\Projects\Lebensordner\src\app\api\auth\login\route.ts:158:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\integration\account-lockout-bypass.test.ts:146:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Unlock then successful login > should reset failure count on successful login after unlock
[AUTH] Login error: Error: `cookies` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context
    at throwForMissingRequestStore (D:\Projects\Lebensordner\node_modules\next\src\server\app-render\work-unit-async-storage.external.ts:343:9)
    at cookies (D:\Projects\Lebensordner\node_modules\next\src\server\request\cookies.ts:141:30)
    at Module.POST (D:\Projects\Lebensordner\src\app\api\auth\login\route.ts:158:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\integration\account-lockout-bypass.test.ts:170:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Full lockout-to-unlock lifecycle > should block login when locked, then allow after unlock
[AUTH] Login error: Error: `cookies` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context
    at throwForMissingRequestStore (D:\Projects\Lebensordner\node_modules\next\src\server\app-render\work-unit-async-storage.external.ts:343:9)
    at cookies (D:\Projects\Lebensordner\node_modules\next\src\server\request\cookies.ts:141:30)
    at Module.POST (D:\Projects\Lebensordner\src\app\api\auth\login\route.ts:158:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\integration\account-lockout-bypass.test.ts:201:31
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Edge cases > should allow login for an account that was never locked
[AUTH] Login error: Error: `cookies` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context
    at throwForMissingRequestStore (D:\Projects\Lebensordner\node_modules\next\src\server\app-render\work-unit-async-storage.external.ts:343:9)
    at cookies (D:\Projects\Lebensordner\node_modules\next\src\server\request\cookies.ts:141:30)
    at Module.POST (D:\Projects\Lebensordner\src\app\api\auth\login\route.ts:158:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\integration\account-lockout-bypass.test.ts:220:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Edge cases > should isolate lockout to the specific email address
[AUTH] Login error: Error: `cookies` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context
    at throwForMissingRequestStore (D:\Projects\Lebensordner\node_modules\next\src\server\app-render\work-unit-async-storage.external.ts:343:9)
    at cookies (D:\Projects\Lebensordner\node_modules\next\src\server\request\cookies.ts:141:30)
    at Module.POST (D:\Projects\Lebensordner\src\app\api\auth\login\route.ts:158:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\integration\account-lockout-bypass.test.ts:255:29
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
stderr | tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > denies access to non-admin users
<AdminPage> is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.

stderr | tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > denies access to non-admin users
A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:

await act(() => ...)

stderr | tests/pages/admin-users.test.tsx > Admin User Management > renders user management table with all columns
<AdminPage> is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding `'use client'` to a module that was originally written for the server.

stderr | tests/pages/admin-users.test.tsx > Admin User Management > renders user management table with all columns
A component suspended inside an `act` scope, but the `act` call was not awaited. When testing React components that depend on asynchronous data, you must await the result:

await act(() => ...)

stderr | tests/api/consent-endpoints.test.ts > Consent API Endpoints > POST /api/consent/grant-health-data > should handle unexpected errors with 500 status
[CONSENT] Grant health data error: Error: boom
    at D:\Projects\Lebensordner\tests\api\consent-endpoints.test.ts:182:56
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should complete email sending within 10 seconds
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should complete email sending within 10 seconds
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould complete email sending within 10 seconds
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":500,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:39.441Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould complete email sending within 10 seconds
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"test@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:39.441Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should complete email sending within 10 seconds
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should complete email sending within 10 seconds
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should timeout after 10 seconds and return success with pending status
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should timeout after 10 seconds and return success with pending status
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould timeout after 10 seconds and return success with pending status
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":10000,"success":false,"timed_out":true,"pending_in_flight":true,"error":"Email sending timed out after 10000ms","timestamp":"2026-02-21T23:23:49.059Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould timeout after 10 seconds and return success with pending status
[22m[39m{"event":"invitation_email_timeout_pending","trusted_person_id":"tp_test_123","email":"test@example.com","timestamp":"2026-02-21T23:23:49.059Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should timeout after 10 seconds and return success with pending status
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:262:15)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should timeout after 10 seconds and return success with pending status
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:263:15)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should queue failed email for retry with error logged
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:233:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should queue failed email for retry with error logged
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:233:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould queue failed email for retry with error logged
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":false,"timed_out":false,"pending_in_flight":false,"error":"Resend API rate limit exceeded","timestamp":"2026-02-21T23:23:39.064Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould queue failed email for retry with error logged
[22m[39m{"event":"email_queued_for_retry","trusted_person_id":"tp_test_123","retry_count":0,"next_retry_at":"2026-02-21T23:28:39.064Z","error":"Resend API rate limit exceeded","timestamp":"2026-02-21T23:23:39.064Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould queue failed email for retry with error logged
[22m[39m{"event":"invitation_email_failed","trusted_person_id":"tp_test_123","email":"test@example.com","error":"Resend API rate limit exceeded","retry_count":1,"timestamp":"2026-02-21T23:23:39.064Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should queue failed email for retry with error logged
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:326:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:233:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should queue failed email for retry with error logged
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:327:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:233:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should update email_sent_at timestamp on successful send
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:251:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should update email_sent_at timestamp on successful send
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:251:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould update email_sent_at timestamp on successful send
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:39.071Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Timeout Handling[2m > [22m[2mshould update email_sent_at timestamp on successful send
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"test@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:39.071Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should update email_sent_at timestamp on successful send
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:251:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Timeout Handling > should update email_sent_at timestamp on successful send
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:251:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Status Tracking > should track email_status transitions
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:269:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Status Tracking > should track email_status transitions
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:269:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Status Tracking[2m > [22m[2mshould track email_status transitions
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:39.075Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mEmail Status Tracking[2m > [22m[2mshould track email_status transitions
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"test@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:39.075Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Status Tracking > should track email_status transitions
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:269:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Email Status Tracking > should track email_status transitions
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:269:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should add to retry queue on email failure
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:287:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should add to retry queue on email failure
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:287:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould add to retry queue on email failure
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":false,"timed_out":false,"pending_in_flight":false,"error":"SMTP connection failed","timestamp":"2026-02-21T23:23:39.080Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould add to retry queue on email failure
[22m[39m{"event":"email_queued_for_retry","trusted_person_id":"tp_test_123","retry_count":0,"next_retry_at":"2026-02-21T23:28:39.080Z","error":"SMTP connection failed","timestamp":"2026-02-21T23:23:39.080Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould add to retry queue on email failure
[22m[39m{"event":"invitation_email_failed","trusted_person_id":"tp_test_123","email":"test@example.com","error":"SMTP connection failed","retry_count":1,"timestamp":"2026-02-21T23:23:39.080Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should add to retry queue on email failure
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:326:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:287:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should add to retry queue on email failure
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:327:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:287:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with failed status on error
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:304:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with failed status on error
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:304:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould call updateEmailStatus with failed status on error
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":false,"timed_out":false,"pending_in_flight":false,"error":"API rate limit exceeded","timestamp":"2026-02-21T23:23:39.085Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould call updateEmailStatus with failed status on error
[22m[39m{"event":"email_queued_for_retry","trusted_person_id":"tp_test_123","retry_count":0,"next_retry_at":"2026-02-21T23:28:39.085Z","error":"API rate limit exceeded","timestamp":"2026-02-21T23:23:39.085Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould call updateEmailStatus with failed status on error
[22m[39m{"event":"invitation_email_failed","trusted_person_id":"tp_test_123","email":"test@example.com","error":"API rate limit exceeded","retry_count":1,"timestamp":"2026-02-21T23:23:39.085Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with failed status on error
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:326:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:304:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with failed status on error
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:327:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:304:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should NOT queue retry when timeout fires but send is still in-flight
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should NOT queue retry when timeout fires but send is still in-flight
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould NOT queue retry when timeout fires but send is still in-flight
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":10000,"success":false,"timed_out":true,"pending_in_flight":true,"error":"Email sending timed out after 10000ms","timestamp":"2026-02-21T23:23:49.089Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould NOT queue retry when timeout fires but send is still in-flight
[22m[39m{"event":"invitation_email_timeout_pending","trusted_person_id":"tp_test_123","email":"test@example.com","timestamp":"2026-02-21T23:23:49.089Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should NOT queue retry when timeout fires but send is still in-flight
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:262:15)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should NOT queue retry when timeout fires but send is still in-flight
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:263:15)

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with pending status and increment retry count
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:359:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with pending status and increment retry count
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:359:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould call updateEmailStatus with pending status and increment retry count
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":false,"timed_out":false,"pending_in_flight":false,"error":"Rate limited","timestamp":"2026-02-21T23:23:39.095Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould call updateEmailStatus with pending status and increment retry count
[22m[39m{"event":"email_queued_for_retry","trusted_person_id":"tp_test_123","retry_count":0,"next_retry_at":"2026-02-21T23:28:39.095Z","error":"Rate limited","timestamp":"2026-02-21T23:23:39.095Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Invitation API[2m > [22m[2mRetry Queue[2m > [22m[2mshould call updateEmailStatus with pending status and increment retry count
[22m[39m{"event":"invitation_email_failed","trusted_person_id":"tp_test_123","email":"test@example.com","error":"Rate limited","retry_count":1,"timestamp":"2026-02-21T23:23:39.095Z"}

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with pending status and increment retry count
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:326:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:359:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Invitation API > Retry Queue > should call updateEmailStatus with pending status and increment retry count
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:327:13)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:359:7
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/consent-endpoints.test.ts > Consent API Endpoints > GET /api/consent/check-health-consent > should return 500 on database error
[CONSENT] Health consent check error: Error: db
    at D:\Projects\Lebensordner\tests\api\consent-endpoints.test.ts:367:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/api/email-invitation.test.ts > Email Retry Queue Processing > should return 401 unauthorized without proper cron secret
[CRON] Unauthorized request attempt

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should call addToRetryQueue with correct parameters on email error
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:512:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should call addToRetryQueue with correct parameters on email error
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:512:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould call addToRetryQueue with correct parameters on email error
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":false,"timed_out":false,"pending_in_flight":false,"error":"Connection refused","timestamp":"2026-02-21T23:23:39.137Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould call addToRetryQueue with correct parameters on email error
[22m[39m{"event":"email_queued_for_retry","trusted_person_id":"tp_test_123","retry_count":0,"next_retry_at":"2026-02-21T23:28:39.137Z","error":"Connection refused","timestamp":"2026-02-21T23:23:39.137Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould call addToRetryQueue with correct parameters on email error
[22m[39m{"event":"invitation_email_failed","trusted_person_id":"tp_test_123","email":"test@example.com","error":"Connection refused","retry_count":1,"timestamp":"2026-02-21T23:23:39.137Z"}

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should call addToRetryQueue with correct parameters on email error
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:326:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:512:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should call addToRetryQueue with correct parameters on email error
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:327:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:512:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to failed with error message on send failure
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:534:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to failed with error message on send failure
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:534:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould set email_status to failed with error message on send failure
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":false,"timed_out":false,"pending_in_flight":false,"error":"Invalid recipient","timestamp":"2026-02-21T23:23:39.142Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould set email_status to failed with error message on send failure
[22m[39m{"event":"email_queued_for_retry","trusted_person_id":"tp_test_123","retry_count":0,"next_retry_at":"2026-02-21T23:28:39.142Z","error":"Invalid recipient","timestamp":"2026-02-21T23:23:39.142Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould set email_status to failed with error message on send failure
[22m[39m{"event":"invitation_email_failed","trusted_person_id":"tp_test_123","email":"test@example.com","error":"Invalid recipient","retry_count":1,"timestamp":"2026-02-21T23:23:39.142Z"}

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to failed with error message on send failure
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:326:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:534:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to failed with error message on send failure
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:327:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:534:5
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to sent with timestamp on success
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:554:22
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to sent with timestamp on success
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:554:22
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould set email_status to sent with timestamp on success
[22m[39m{"event":"email_send_attempt","to":"test@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:39.149Z"}

[90mstdout[2m | tests/api/email-invitation.test.ts[2m > [22m[2mEmail Queue - addToRetryQueue and updateEmailStatus Integration[2m > [22m[2mshould set email_status to sent with timestamp on success
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"test@example.com","message_id":"msg_success_123","timestamp":"2026-02-21T23:23:39.149Z"}

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to sent with timestamp on success
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:554:22
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/email-invitation.test.ts > Email Queue - addToRetryQueue and updateEmailStatus Integration > should set email_status to sent with timestamp on success
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\email-invitation.test.ts:554:22
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

 [32mŒì¬£√¥[39m tests/api/email-invitation.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 218[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/api/consent-endpoints.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 245[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
stderr | tests/components/consent-modal.test.tsx > ConsentModal > should render custom content when provided
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should disable accept button when requireCheckbox=true and unchecked
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should enable accept button when checkbox is checked
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should show loading state when onAccept is in progress
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 34[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 26[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
stderr | tests/components/consent-modal.test.tsx > ConsentModal > should call onAccept when accept button clicked
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should call onDecline when decline button clicked
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should not allow dismiss when canDismiss=false
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should hide close button when canDismiss=false
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should reset checkbox state when modal closes
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

stderr | tests/components/consent-modal.test.tsx > ConsentModal > should reset loading state when modal closes
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.
Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.

 [32mŒì¬£√¥[39m tests/components/consent-modal.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 618[2mms[22m[39m
stderr | tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > shows loading spinner while fetching data
A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32mŒì¬£√¥[39m tests/pages/abo-debug-panel.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 727[2mms[22m[39m
stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Basic User Access > should allow Basic users to invite trusted persons
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:223:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Basic User Access > should allow Basic users to invite trusted persons
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:223:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mBasic User Access[2m > [22m[2mshould allow Basic users to invite trusted persons
[22m[39m{"event":"email_send_attempt","to":"trusted@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:40.813Z"}

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mBasic User Access[2m > [22m[2mshould allow Basic users to invite trusted persons
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"trusted@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:40.814Z"}

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Basic User Access > should allow Basic users to invite trusted persons
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:223:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Basic User Access > should allow Basic users to invite trusted persons
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:223:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Premium User Access > should allow Premium users to invite trusted persons
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:266:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Premium User Access > should allow Premium users to invite trusted persons
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:266:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mPremium User Access[2m > [22m[2mshould allow Premium users to invite trusted persons
[22m[39m{"event":"email_send_attempt","to":"trusted@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:40.832Z"}

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mPremium User Access[2m > [22m[2mshould allow Premium users to invite trusted persons
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"trusted@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:40.833Z"}

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Premium User Access > should allow Premium users to invite trusted persons
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:266:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Premium User Access > should allow Premium users to invite trusted persons
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:266:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Basic user with 2 trusted persons (under limit)
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:309:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Basic user with 2 trusted persons (under limit)
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:309:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mLimit Boundary Testing[2m > [22m[2mshould allow Basic user with 2 trusted persons (under limit)
[22m[39m{"event":"email_send_attempt","to":"trusted@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:40.845Z"}

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mLimit Boundary Testing[2m > [22m[2mshould allow Basic user with 2 trusted persons (under limit)
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"trusted@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:40.845Z"}

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Basic user with 2 trusted persons (under limit)
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:309:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Basic user with 2 trusted persons (under limit)
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:309:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store premium price ID from subscription
[22m[39mWebhook received: checkout.session.completed
[Webhook] Checkout session completed: cs_test_1771716220767
[Webhook] Customer: cus_test
[Webhook] Subscription: sub_test_1771716220767

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store premium price ID from subscription
[22m[39m[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220767'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_premium_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store premium price ID from subscription
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220767",
  "stripe_price_id": "price_premium_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Premium user with 4 trusted persons (under limit)
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:72:31)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:328:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Premium user with 4 trusted persons (under limit)
Rate limit check failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at checkRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:51:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:90:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:328:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store premium price ID from subscription
[22m[39m[Webhook] Profile updated successfully for user: test-user-id with price ID: price_premium_monthly_test

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mLimit Boundary Testing[2m > [22m[2mshould allow Premium user with 4 trusted persons (under limit)
[22m[39m{"event":"email_send_attempt","to":"trusted@example.com","subject":"Test Owner hat Sie als Vertrauensperson eingeladen","duration_ms":0,"success":true,"timed_out":false,"pending_in_flight":false,"error":null,"timestamp":"2026-02-21T23:23:40.852Z"}

[90mstdout[2m | tests/api/trusted-person-invite-tier.test.ts[2m > [22m[2mTrusted Person Invite API - Tier Security[2m > [22m[2mLimit Boundary Testing[2m > [22m[2mshould allow Premium user with 4 trusted persons (under limit)
[22m[39m{"event":"invitation_email_sent","trusted_person_id":"tp_test_123","email":"trusted@example.com","message_id":"msg_123","timestamp":"2026-02-21T23:23:40.852Z"}

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Premium user with 4 trusted persons (under limit)
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:241:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:328:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

stderr | tests/api/trusted-person-invite-tier.test.ts > Trusted Person Invite API - Tier Security > Limit Boundary Testing > should allow Premium user with 4 trusted persons (under limit)
Rate limit increment failed: TypeError: supabase.from(...).select(...).eq(...).eq is not a function
    at incrementRateLimit (D:\Projects\Lebensordner\src\lib\security\rate-limit.ts:97:8)
    at POST (D:\Projects\Lebensordner\src\app\api\trusted-person\invite\route.ts:242:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at D:\Projects\Lebensordner\tests\api\trusted-person-invite-tier.test.ts:328:24
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

 [32mŒì¬£√¥[39m tests/api/trusted-person-invite-tier.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 112[2mms[22m[39m
[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family monthly price ID as premium
[22m[39mWebhook received: checkout.session.completed
[Webhook] Checkout session completed: cs_test_1771716220855
[Webhook] Customer: cus_test
[Webhook] Subscription: sub_test_1771716220855

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family monthly price ID as premium
[22m[39m[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220855'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_family_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family monthly price ID as premium
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220855",
  "stripe_price_id": "price_family_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family monthly price ID as premium
[22m[39m[Webhook] Profile updated successfully for user: test-user-id with price ID: price_family_monthly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family yearly price ID
[22m[39mWebhook received: checkout.session.completed
[Webhook] Checkout session completed: cs_test_1771716220858
[Webhook] Customer: cus_test
[Webhook] Subscription: sub_test_1771716220858

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family yearly price ID
[22m[39m[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220858'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_family_yearly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family yearly price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220858",
  "stripe_price_id": "price_family_yearly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcheckout.session.completed[2m > [22m[2mshould extract and store family yearly price ID
[22m[39m[Webhook] Profile updated successfully for user: test-user-id with price ID: price_family_yearly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store basic monthly price ID
[22m[39mWebhook received: customer.subscription.created
[Webhook] Subscription event: customer.subscription.created
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220860'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_basic_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store basic monthly price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220860",
  "stripe_price_id": "price_basic_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store basic monthly price ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_basic_monthly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store premium yearly price ID
[22m[39mWebhook received: customer.subscription.created
[Webhook] Subscription event: customer.subscription.created
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220862'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_premium_yearly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store premium yearly price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220862",
  "stripe_price_id": "price_premium_yearly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store premium yearly price ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_premium_yearly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store family monthly price ID
[22m[39mWebhook received: customer.subscription.created
[Webhook] Subscription event: customer.subscription.created
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220866'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_family_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store family monthly price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220866",
  "stripe_price_id": "price_family_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.created[2m > [22m[2mshould store family monthly price ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_family_monthly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.updated[2m > [22m[2mshould update price ID when subscription changes
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220868'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_premium_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.updated[2m > [22m[2mshould update price ID when subscription changes
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220868",
  "stripe_price_id": "price_premium_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.updated[2m > [22m[2mshould update price ID when subscription changes
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_premium_monthly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.updated[2m > [22m[2mshould handle upgrade from basic to premium
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716220870'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_premium_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.updated[2m > [22m[2mshould handle upgrade from basic to premium
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716220870",
  "stripe_price_id": "price_premium_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.updated[2m > [22m[2mshould handle upgrade from basic to premium
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_premium_monthly_test

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.deleted[2m > [22m[2mshould clear price ID and set status to canceled
[22m[39mWebhook received: customer.subscription.deleted
[Webhook] Subscription deleted event received: {
  subscriptionId: [32m'sub_test_1771716220872'[39m,
  customer: [32m'cus_test'[39m,
  previousPriceId: [32m'price_premium_monthly_test'[39m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.deleted[2m > [22m[2mshould clear price ID and set status to canceled
[22m[39m[Webhook] Clearing subscription data for user: test-user-id Update data: {
  subscription_status: [32m'canceled'[39m,
  stripe_subscription_id: [1mnull[22m,
  stripe_price_id: [1mnull[22m
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mcustomer.subscription.deleted[2m > [22m[2mshould clear price ID and set status to canceled
[22m[39m[Webhook] Subscription canceled successfully for user: test-user-id

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mPrice ID extraction[2m > [22m[2mshould handle subscription with no items gracefully
[22m[39mWebhook received: customer.subscription.created
[Webhook] Subscription event: customer.subscription.created
[Webhook] Subscription details: {
  id: [32m'sub_test'[39m,
  status: [32m'active'[39m,
  priceId: [1mnull[22m,
  periodEnd: [32m'2026-03-23T23:23:40.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m0[39m
}

stderr | tests/api/webhook.test.ts > Stripe Webhook Handler > Price ID extraction > should handle subscription with no items gracefully
[Webhook] WARNING: No price ID found in subscription items for event: customer.subscription.created Subscription ID: sub_test Items data: []

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mPrice ID extraction[2m > [22m[2mshould handle subscription with no items gracefully
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test",
  "stripe_price_id": null,
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:40.000Z"
}

[90mstdout[2m | tests/api/webhook.test.ts[2m > [22m[2mStripe Webhook Handler[2m > [22m[2mPrice ID extraction[2m > [22m[2mshould handle subscription with no items gracefully
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: [1mnull[22m

stderr | tests/api/webhook.test.ts > Stripe Webhook Handler > Webhook signature verification > should return 400 for invalid signature
Webhook signature verification failed: Invalid signature

 [32mŒì¬£√¥[39m tests/api/webhook.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/api/reminder-watcher-tier.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 143[2mms[22m[39m
[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with malformed price ID
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221072'[39m,
  status: [32m'active'[39m,
  priceId: [32m'invalid_price_id'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with malformed price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221072",
  "stripe_price_id": "invalid_price_id",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with malformed price ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: invalid_price_id

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with missing subscription_id
[22m[39mWebhook received: checkout.session.completed
[Webhook] Checkout session completed: cs_test_missing_sub
[Webhook] Customer: cus_test
[Webhook] Subscription: [1mnull[22m

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with missing customer ID
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221145'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_unknown_12345'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [1mnull[22m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with missing customer ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221145",
  "stripe_price_id": "price_unknown_12345",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with missing customer ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_unknown_12345

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with empty items.data array
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_empty_items'[39m,
  status: [32m'active'[39m,
  priceId: [1mnull[22m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m0[39m
}

stderr | tests/api/webhook-edge-cases.test.ts > Stripe Webhook Edge Cases > Malformed Data > handles webhook with empty items.data array
[Webhook] WARNING: No price ID found in subscription items for event: customer.subscription.updated Subscription ID: sub_test_empty_items Items data: []

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with empty items.data array
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_empty_items",
  "stripe_price_id": null,
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with empty items.data array
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: [1mnull[22m

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with uppercase price ID when env var is lowercase
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221151'[39m,
  status: [32m'active'[39m,
  priceId: [32m'PRICE_PREMIUM_MONTHLY_TEST'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with uppercase price ID when env var is lowercase
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221151",
  "stripe_price_id": "PRICE_PREMIUM_MONTHLY_TEST",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with uppercase price ID when env var is lowercase
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: PRICE_PREMIUM_MONTHLY_TEST

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with lowercase price ID when env var is uppercase
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221154'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_premium_monthly_test'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with lowercase price ID when env var is uppercase
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221154",
  "stripe_price_id": "price_premium_monthly_test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mMalformed Data[2m > [22m[2mhandles webhook with lowercase price ID when env var is uppercase
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_premium_monthly_test

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles duplicate webhook delivery idempotently
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221157'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_unknown_12345'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles duplicate webhook delivery idempotently
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221157",
  "stripe_price_id": "price_unknown_12345",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles duplicate webhook delivery idempotently
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_unknown_12345

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles duplicate webhook delivery idempotently
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221157'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_unknown_12345'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles duplicate webhook delivery idempotently
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221157",
  "stripe_price_id": "price_unknown_12345",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles duplicate webhook delivery idempotently
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_unknown_12345

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent subscription updates
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221162'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_unknown_12345'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent subscription updates
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221162",
  "stripe_price_id": "price_unknown_12345",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent subscription updates
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_unknown_12345

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent subscription updates
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221162'[39m,
  status: [32m'active'[39m,
  priceId: [32m'invalid_price_id'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent subscription updates
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221162",
  "stripe_price_id": "invalid_price_id",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent subscription updates
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: invalid_price_id

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221166'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_unknown_12345'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221166",
  "stripe_price_id": "price_unknown_12345",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_unknown_12345

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39mWebhook received: customer.subscription.deleted
[Webhook] Subscription deleted event received: {
  subscriptionId: [32m'sub_test_1771716221166'[39m,
  customer: [32m'cus_test'[39m,
  previousPriceId: [32m'price_unknown_12345'[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39m[Webhook] Clearing subscription data for user: test-user-id Update data: {
  subscription_status: [32m'canceled'[39m,
  stripe_subscription_id: [1mnull[22m,
  stripe_price_id: [1mnull[22m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39m[Webhook] Subscription canceled successfully for user: test-user-id

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221166'[39m,
  status: [32m'active'[39m,
  priceId: [32m'price_unknown_12345'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221166",
  "stripe_price_id": "price_unknown_12345",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles rapid subscription status changes (active -> canceled -> active)
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: price_unknown_12345

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent webhooks with different case variations of the same price ID
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221170'[39m,
  status: [32m'active'[39m,
  priceId: [32m'PRICE_PREMIUM_MONTHLY_TEST'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent webhooks with different case variations of the same price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221170",
  "stripe_price_id": "PRICE_PREMIUM_MONTHLY_TEST",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent webhooks with different case variations of the same price ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: PRICE_PREMIUM_MONTHLY_TEST

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent webhooks with different case variations of the same price ID
[22m[39mWebhook received: customer.subscription.updated
[Webhook] Subscription event: customer.subscription.updated
[Webhook] Subscription details: {
  id: [32m'sub_test_1771716221170'[39m,
  status: [32m'active'[39m,
  priceId: [32m'Price_Premium_Monthly_Test'[39m,
  periodEnd: [32m'2026-03-23T23:23:41.000Z'[39m,
  customer: [32m'cus_test'[39m,
  itemsCount: [33m1[39m
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent webhooks with different case variations of the same price ID
[22m[39m[Webhook] Found user ID: test-user-id
[Webhook] Updating profile with data: {
  "stripe_subscription_id": "sub_test_1771716221170",
  "stripe_price_id": "Price_Premium_Monthly_Test",
  "subscription_status": "active",
  "subscription_current_period_end": "2026-03-23T23:23:41.000Z"
}

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mConcurrent Operations[2m > [22m[2mhandles concurrent webhooks with different case variations of the same price ID
[22m[39m[Webhook] Subscription updated successfully for user: test-user-id with price ID: Price_Premium_Monthly_Test

stderr | tests/api/webhook-edge-cases.test.ts > Stripe Webhook Edge Cases > Webhook Validation > returns 400 for signature validation failure
Webhook signature verification failed: Invalid signature

[90mstdout[2m | tests/api/webhook-edge-cases.test.ts[2m > [22m[2mStripe Webhook Edge Cases[2m > [22m[2mWebhook Validation[2m > [22m[2mhandles invalid event type gracefully
[22m[39mWebhook received: customer.subscription.paused

 [32mŒì¬£√¥[39m tests/api/webhook-edge-cases.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 108[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/components/health-data-consent-content.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/components/tier-status-card.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[32m 97[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [32mŒì¬£√¥[39m tests/integration/tier-detection-flow.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/subscription-tier.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/pages/abo.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[32m 19[2mms[22m[39m
stderr | tests/lib/security/audit-log.test.ts > audit-log > logSecurityEvent > should handle database errors gracefully
Failed to log security event: Error: DB error
    at D:\Projects\Lebensordner\tests\lib\security\audit-log.test.ts:169:40
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///D:/Projects/Lebensordner/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

 [32mŒì¬£√¥[39m tests/lib/security/audit-log.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/lib/security/encryption.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/utils/tier-detection-logging.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mŒì¬£√¥[39m tests/lib/auth/guards.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [32mŒì¬£√¥[39m tests/integration/tier-downgrade-flow.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [2m[90mŒì√•√¥[39m[22m tests/integration/health-consent-withdrawal-trigger.test.ts [2m([22m[2m10 tests[22m[2m | [22m[33m10 skipped[39m[2m)[22m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 90[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 29[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 25[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 614[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[32m 251[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 43[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 6[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 6[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 6[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 18[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 11[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/erinnerungen.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 3179[2mms[22m[39m
   [33m[2mŒì¬£√¥[22m[39m Erinnerungen Reminder Watcher Tier Gate[2m > [22mBasic-User kann Reminder mit Watcher erstellen [33m 587[2mms[22m[39m
   [33m[2mŒì¬£√¥[22m[39m Erinnerungen Reminder Watcher Tier Gate[2m > [22mPremium-User kann Reminder mit Watcher erstellen [33m 614[2mms[22m[39m
   [33m[2mŒì¬£√¥[22m[39m Erinnerungen Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern oder benachrichtigen [33m 508[2mms[22m[39m
   [33m[2mŒì¬£√¥[22m[39m Erinnerungen Reminder Watcher Tier Gate[2m > [22mTier-Wechsel aktualisiert UI [33m 329[2mms[22m[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 87 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/components/privacy-policy-update-content.test.tsx > PrivacyPolicyUpdateContent > should render without errors
TestingLibraryElementError: Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="prose prose-warmgray max-w-none"
    >
      <h2
        class="text-xl font-semibold text-warmgray-900 mt-8 mb-4"
      >
        Wichtige ‚îú√§nderungen
      </h2>
      <p
        class="text-warmgray-700 mb-4"
      >
        Wir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:
      </p>
      <ul
        class="list-disc pl-6 text-warmgray-700 mb-6"
      >
        <li>
          Klarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen
        </li>
        <li>
          Aktualisierung der Auftragsverarbeiter-Liste und Standorte
        </li>
        <li>
          Pr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien
        </li>
        <li>
          Erg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung
        </li>
      </ul>
      <p
        class="text-warmgray-700 mb-6"
      >
        <a
          class="text-sage-600 hover:text-sage-700"
          href="/datenschutz"
        >
          Vollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen
        </a>
      </p>
      <h3
        class="text-lg font-semibold text-warmgray-900 mt-8 mb-3"
      >
        Kontakt
      </h3>
      <p
        class="text-warmgray-700 mb-4"
      >
        Verantwortlich f‚îú‚ïùr die Datenverarbeitung:
        <br />
        Christof Boermel
        <br />
        Lehmbrookweg 2
        <br />
        22159 Hamburg
        <br />
        E-Mail: matbo@matsbusiness.co.site
        <br />
        Telefon: +49 172 7553584
      </p>
    </div>
  </div>
</body>
 Œì¬•¬ª Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 Œì¬•¬ª tests/components/privacy-policy-update-content.test.tsx:8:19
      6|   it('should render without errors', () => {
      7|     render(<PrivacyPolicyUpdateContent />)
      8|     expect(screen.getByText(/Stand:/i)).toBeInTheDocument()
       |                   ^
      9|   })
     10| 

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/87]Œì√Ñ¬ª

 FAIL  tests/components/privacy-policy-update-content.test.tsx > PrivacyPolicyUpdateContent > should render all sections
TestingLibraryElementError: Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="prose prose-warmgray max-w-none"
    >
      <h2
        class="text-xl font-semibold text-warmgray-900 mt-8 mb-4"
      >
        Wichtige ‚îú√§nderungen
      </h2>
      <p
        class="text-warmgray-700 mb-4"
      >
        Wir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:
      </p>
      <ul
        class="list-disc pl-6 text-warmgray-700 mb-6"
      >
        <li>
          Klarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen
        </li>
        <li>
          Aktualisierung der Auftragsverarbeiter-Liste und Standorte
        </li>
        <li>
          Pr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien
        </li>
        <li>
          Erg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung
        </li>
      </ul>
      <p
        class="text-warmgray-700 mb-6"
      >
        <a
          class="text-sage-600 hover:text-sage-700"
          href="/datenschutz"
        >
          Vollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen
        </a>
      </p>
      <h3
        class="text-lg font-semibold text-warmgray-900 mt-8 mb-3"
      >
        Kontakt
      </h3>
      <p
        class="text-warmgray-700 mb-4"
      >
        Verantwortlich f‚îú‚ïùr die Datenverarbeitung:
        <br />
        Christof Boermel
        <br />
        Lehmbrookweg 2
        <br />
        22159 Hamburg
        <br />
        E-Mail: matbo@matsbusiness.co.site
        <br />
        Telefon: +49 172 7553584
      </p>
    </div>
  </div>
</body>
 Œì¬•¬ª Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 Œì¬•¬ª tests/components/privacy-policy-update-content.test.tsx:14:19
     12|     render(<PrivacyPolicyUpdateContent />)
     13| 
     14|     expect(screen.getByText('1. Verantwortlicher')).toBeInTheDocument()
       |                   ^
     15|     expect(screen.getByText('2. Erhebung und Speicherung personenbezogŒì√á¬™
     16|     expect(screen.getByText('3. Zweck der Datenverarbeitung')).toBeInTŒì√á¬™

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/87]Œì√Ñ¬ª

 FAIL  tests/components/privacy-policy-update-content.test.tsx > PrivacyPolicyUpdateContent > should display contact information
TestingLibraryElementError: Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="prose prose-warmgray max-w-none"
    >
      <h2
        class="text-xl font-semibold text-warmgray-900 mt-8 mb-4"
      >
        Wichtige ‚îú√§nderungen
      </h2>
      <p
        class="text-warmgray-700 mb-4"
      >
        Wir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:
      </p>
      <ul
        class="list-disc pl-6 text-warmgray-700 mb-6"
      >
        <li>
          Klarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen
        </li>
        <li>
          Aktualisierung der Auftragsverarbeiter-Liste und Standorte
        </li>
        <li>
          Pr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien
        </li>
        <li>
          Erg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung
        </li>
      </ul>
      <p
        class="text-warmgray-700 mb-6"
      >
        <a
          class="text-sage-600 hover:text-sage-700"
          href="/datenschutz"
        >
          Vollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen
        </a>
      </p>
      <h3
        class="text-lg font-semibold text-warmgray-900 mt-8 mb-3"
      >
        Kontakt
      </h3>
      <p
        class="text-warmgray-700 mb-4"
      >
        Verantwortlich f‚îú‚ïùr die Datenverarbeitung:
        <br />
        Christof Boermel
        <br />
        Lehmbrookweg 2
        <br />
        22159 Hamburg
        <br />
        E-Mail: matbo@matsbusiness.co.site
        <br />
        Telefon: +49 172 7553584
      </p>
    </div>
  </div>
</body>
 Œì¬•¬ª Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 Œì¬•¬ª tests/components/privacy-policy-update-content.test.tsx:26:19
     24|   it('should display contact information', () => {
     25|     render(<PrivacyPolicyUpdateContent />)
     26|     expect(screen.getByText(/datenschutz@lebensordner.org/i)).toBeInThŒì√á¬™
       |                   ^
     27|   })
     28| })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[3/87]Œì√Ñ¬ª

 FAIL  tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Unlock then successful login > should allow login after account is unlocked
AssertionError: expected 500 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 500

 Œì¬•¬ª tests/integration/account-lockout-bypass.test.ts:149:31
    147|       const body = await response.json()
    148| 
    149|       expect(response.status).toBe(200)
       |                               ^
    150|       expect(body.success).toBe(true)
    151|       expect(body.access_token).toBe('test-access-token')

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[4/87]Œì√Ñ¬ª

 FAIL  tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Unlock then successful login > should reset failure count on successful login after unlock
AssertionError: expected "spy" to be called with arguments: [ 'locked-user@example.com' ]

Number of calls: 0

 Œì¬•¬ª tests/integration/account-lockout-bypass.test.ts:172:33
    170|       await POST(createLoginRequest(TEST_EMAIL, TEST_PASSWORD))
    171| 
    172|       expect(resetFailureCount).toHaveBeenCalledWith(TEST_EMAIL)
       |                                 ^
    173|     })
    174|   })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[5/87]Œì√Ñ¬ª

 FAIL  tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Full lockout-to-unlock lifecycle > should block login when locked, then allow after unlock
AssertionError: expected 500 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 500

 Œì¬•¬ª tests/integration/account-lockout-bypass.test.ts:204:38
    202|       const successBody = await successResponse.json()
    203| 
    204|       expect(successResponse.status).toBe(200)
       |                                      ^
    205|       expect(successBody.success).toBe(true)
    206|       expect(mockSignInWithPassword).toHaveBeenCalledTimes(1)

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[6/87]Œì√Ñ¬ª

 FAIL  tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Edge cases > should allow login for an account that was never locked
AssertionError: expected 500 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 500

 Œì¬•¬ª tests/integration/account-lockout-bypass.test.ts:223:31
    221|       const body = await response.json()
    222| 
    223|       expect(response.status).toBe(200)
       |                               ^
    224|       expect(body.success).toBe(true)
    225|       expect(mockSignInWithPassword).toHaveBeenCalledTimes(1)

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[7/87]Œì√Ñ¬ª

 FAIL  tests/integration/account-lockout-bypass.test.ts > Account Lockout Bypass Prevention - Integration > Edge cases > should isolate lockout to the specific email address
AssertionError: expected 500 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 500

 Œì¬•¬ª tests/integration/account-lockout-bypass.test.ts:256:36
    254| 
    255|       const otherResponse = await POST(createLoginRequest(OTHER_EMAIL,Œì√á¬™
    256|       expect(otherResponse.status).toBe(200)
       |                                    ^
    257|       expect(mockSignInWithPassword).toHaveBeenCalledTimes(1)
    258|     })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[8/87]Œì√Ñ¬ª

 FAIL  tests/integration/debug-tools-flow.test.tsx > Debug Tools Integration Flow > walks through abo and admin debug tools flow
AssertionError: expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ]

Number of calls: 0


Ignored nodes: comments, script, style
<html>
  <head />
  <body>
    <div>
      <div
        class="max-w-5xl mx-auto space-y-8"
      >
        <div
          class="text-center space-y-4"
        >
          <h1
            class="text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"
          >
            Welcher Tarif passt zu Ihnen?
          </h1>
          <p
            class="text-xl text-warmgray-600 max-w-2xl mx-auto"
          >
            Alle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.
          </p>
        </div>
        <div
          class="rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"
        >
          <div
            class="card-content p-6 pt-6"
          >
            <div
              class="flex items-center justify-between"
            >
              <div
                class="flex items-center gap-3"
              >
                <div
                  class="w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"
                >
                  <svg
                    aria-hidden="true"
                    class="lucide lucide-crown w-6 h-6 text-white"
                    fill="none"
                    height="24"
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    viewBox="0 0 24 24"
                    width="24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"
                    />
                    <path
                      d="M5 21h14"
                    />
                  </svg>
                </div>
                <div>
                  <p
                    class="font-semibold text-warmgray-900"
                  >
                    Basis aktiv
                  </p>
                  <p
                    class="text-sm text-warmgray-600"
                  >
                    N‚îú√±chste Zahlung
                    : 
                    20.1.2026
                  </p>
                </div>
              </div>
              <button
                class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"
              >
                Abo verwalten
              </button>
            </div>
          </div>
        </div>
        <div
          class="flex justify-center"
        >
          <div
            data-orientation="horizontal"
            dir="ltr"
          >
            <div
              aria-orientation="horizontal"
              class="h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"
              data-orientation="horizontal"
              role="tablist"
              style="outline: none;"
              tabindex="0"
            >
              <button
                aria-controls="radix-_r_3_-content-monthly"
                aria-selected="true"
                class="inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"
                data-orientation="horizontal"
                data-radix-collection-item=""
                data-state="active"
                id="radix-_r_3_-trigger-monthly"
                role="tab"
                tabindex="-1"
                type="button"
              >
                Monatlich
              </button>
              <button
                aria-controls="radix-_r_3_-content-yearly"
                aria-selected="false"
                class="inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"
                data-orientation="horizontal"
                data-radix-collection-item=""
                data-state="inactive"
                id="radix-_r_3_-trigger-yearly"
                role="tab"
                tabindex="-1"
                type="button"
              >
                J‚îú√±hrlich
                <span
                  class="absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...
 Œì¬•¬ª tests/integration/debug-tools-flow.test.tsx:118:30
    116| 
    117|       await waitFor(() => {
    118|         expect(console.warn).toHaveBeenCalledWith(
       |                              ^
    119|           expect.stringContaining('Unrecognized price ID')
    120|         )
 Œì¬•¬ª runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 Œì¬•¬ª checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 Œì¬•¬ª Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[9/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > denies access to non-admin users
TestingLibraryElementError: Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-stats.test.tsx:69:18
     67|     render(<AdminPage />)
     68| 
     69|     await screen.findByText('Zugriff verweigert')
       |                  ^
     70|     expect(screen.getByText(/keine Berechtigung/i)).toBeInTheDocument()
     71|   })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[10/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > renders platform statistics
TestingLibraryElementError: Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-stats.test.tsx:76:18
     74|     render(<AdminPage />)
     75| 
     76|     await screen.findByText('Admin Dashboard')
       |                  ^
     77| 
     78|     expect(screen.getByText('150')).toBeInTheDocument()

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[11/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > shows loading spinner while fetching data
Error: expect(received).toBeInTheDocument()

received value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: null
 Œì¬•¬ª tests/pages/admin-stats.test.tsx:102:54
    100|     const { container } = render(<AdminPage />)
    101| 
    102|     expect(container.querySelector('.animate-spin')).toBeInTheDocumentŒì√á¬™
       |                                                      ^
    103| 
    104|     resolveStats!({ data: mockStats, error: null })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[12/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > shows error state when stats fail to load
TestingLibraryElementError: Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-stats.test.tsx:113:18
    111|     render(<AdminPage />)
    112| 
    113|     await screen.findByText(/Statistiken konnten nicht geladen werden/Œì√á¬™
       |                  ^
    114|   })
    115| 

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[13/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-stats.test.tsx > Admin Dashboard Stats > refresh button updates statistics
TestingLibraryElementError: Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-stats.test.tsx:119:18
    117|     render(<AdminPage />)
    118| 
    119|     await screen.findByText('Admin Dashboard')
       |                  ^
    120|     expect(screen.getByText('150')).toBeInTheDocument()
    121| 

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[14/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-users.test.tsx > Admin User Management > renders user management table with all columns
TestingLibraryElementError: Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-users.test.tsx:100:18
     98|     render(<AdminPage />)
     99| 
    100|     await screen.findByText('Benutzerverwaltung')
       |                  ^
    101| 
    102|     expect(screen.getByText('Benutzer')).toBeInTheDocument()

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[15/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-users.test.tsx > Admin User Management > filters users by search query
TestingLibraryElementError: Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-users.test.tsx:115:18
    113|   it('filters users by search query', async () => {
    114|     render(<AdminPage />)
    115|     await screen.findByText('Benutzerverwaltung')
       |                  ^
    116| 
    117|     const searchInput = screen.getByPlaceholderText(/Nach E-Mail oder Œì√á¬™

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[16/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-users.test.tsx > Admin User Management > shows subscription and onboarding badges
TestingLibraryElementError: Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-users.test.tsx:129:18
    127|   it('shows subscription and onboarding badges', async () => {
    128|     render(<AdminPage />)
    129|     await screen.findByText('Benutzerverwaltung')
       |                  ^
    130| 
    131|     expect(screen.getByText('Premium')).toBeInTheDocument()

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[17/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-users.test.tsx > Admin User Management > formats storage values and dates correctly
TestingLibraryElementError: Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-users.test.tsx:139:18
    137|   it('formats storage values and dates correctly', async () => {
    138|     render(<AdminPage />)
    139|     await screen.findByText('Benutzerverwaltung')
       |                  ^
    140| 
    141|     expect(screen.getByText('50.00 MB')).toBeInTheDocument()

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[18/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-users.test.tsx > Admin User Management > updates role when dropdown changes
TestingLibraryElementError: Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-users.test.tsx:158:18
    156|     const user = userEvent.setup()
    157|     render(<AdminPage />)
    158|     await screen.findByText('Benutzerverwaltung')
       |                  ^
    159| 
    160|     const roleSelects = screen.getAllByRole('combobox')

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[19/87]Œì√Ñ¬ª

 FAIL  tests/pages/admin-users.test.tsx > Admin User Management > shows empty state when no users found
TestingLibraryElementError: Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div />
</body>

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 Œì¬•¬ª waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 Œì¬•¬ª node_modules/@testing-library/dom/dist/query-helpers.js:86:33
 Œì¬•¬ª tests/pages/admin-users.test.tsx:175:18
    173| 
    174|     render(<AdminPage />)
    175|     await screen.findByText('Benutzerverwaltung')
       |                  ^
    176| 
    177|     expect(screen.getByText('Keine Benutzer gefunden')).toBeInTheDocumŒì√á¬™

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[20/87]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:145:11
    143|   const ctx = useContext(VaultContext)
    144|   if (!ctx) {
    145|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    146|   }
    147|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[21/87]Œì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:145:11
    143|   const ctx = useContext(VaultContext)
    144|   if (!ctx) {
    145|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    146|   }
    147|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:274:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[22/87]Œì√Ñ¬ª

 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Premium banner when owner has Premium tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Basic banner when owner has Basic tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should pass correct owner tier to DocumentViewer for free tier
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should render both Vertrauenspersonen and Familie tabs
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should activate Familie tab when URL hash is #familie
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should switch to Familie tab and fetch family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should display family members after switching to Familie tab
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Premium member should show "Dokumente laden" download button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Basic member should show "Nur Ansicht" view button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Free member should show disabled "Abo erforderlich" button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display correct tier badges for each member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display document counts for family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should open DocumentViewer modal when clicking "Nur Ansicht" for Basic member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should pass correct props to DocumentViewer
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should trigger download when clicking "Dokumente laden" for Premium member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should show loading state while downloading
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/view for Free tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/download for Basic tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should display error state when family members API fails
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show empty state when no family members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show info box when user only has outgoing members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show download access banner when Premium member exists
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show view-only banner when only Basic members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show no access banner when only Free members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Outgoing Members Section > should display outgoing members in separate section
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should render with responsive grid classes
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should stack buttons vertically on mobile
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should open modal with mobile-optimized view mode
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should render modal dialog when viewing documents
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should lazy load DocumentViewer component on demand
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should prefetch family members API for faster tab switch
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:145:11
    143|   const ctx = useContext(VaultContext)
    144|   if (!ctx) {
    145|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    146|   }
    147|   return ctx
 Œì¬•¬ª ZugriffPage src/app/(dashboard)/zugriff/page.tsx:103:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[23/87]Œì√Ñ¬ª

 FAIL  tests/lib/consent/manager.test.ts > consent manager > getCurrentConsent > should return latest consent for specific type
AssertionError: expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ]

Number of calls: 0

 Œì¬•¬ª tests/lib/consent/manager.test.ts:114:25
    112|       const result = await getCurrentConsent('user_1', 'privacy_policyŒì√á¬™
    113| 
    114|       expect(mockOrder).toHaveBeenCalledWith('timestamp', { ascending:Œì√á¬™
       |                         ^
    115|       expect(result).toEqual(record)
    116|     })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[24/87]Œì√Ñ¬ª

 FAIL  tests/lib/consent/manager.test.ts > consent manager > hasHealthDataConsent > should return true when health_data_consent_granted is true
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 Œì¬•¬ª tests/lib/consent/manager.test.ts:130:22
    128|       const result = await hasHealthDataConsent('user_1')
    129| 
    130|       expect(result).toBe(true)
       |                      ^
    131|     })
    132| 

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[25/87]Œì√Ñ¬ª

 FAIL  tests/lib/consent/manager.test.ts > consent manager > hasHealthDataConsent > should return false when profile not found
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 Œì¬•¬ª tests/lib/consent/manager.test.ts:155:22
    153|       const result = await hasHealthDataConsent('user_1')
    154| 
    155|       expect(result).toBe(false)
       |                      ^
    156|     })
    157| 

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[26/87]Œì√Ñ¬ª

 FAIL  tests/lib/consent/manager.test.ts > consent manager > grantHealthDataConsent > should return {ok: false, error} on profile update failure
AssertionError: expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }

- Expected
+ Received

  {
-   "error": "Failed to update health data consent profile",
-   "ok": false,
+   "ok": true,
  }

 Œì¬•¬ª tests/lib/consent/manager.test.ts:241:22
    239|       const result = await grantHealthDataConsent('user_1')
    240| 
    241|       expect(result).toEqual({ ok: false, error: 'Failed to update heaŒì√á¬™
       |                      ^
    242|     })
    243|   })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[27/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/document-e2ee.test.ts > document-e2ee Phase 1 > encryptFile + decryptFile roundtrip
TypeError: Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.
 Œì¬•¬ª encryptFile src/lib/security/document-e2ee.ts:44:53
     42|   }
     43| 
     44|   const ciphertext = await globalThis.crypto.subtle.encrypt(
       |                                                     ^
     45|     params,
     46|     dek,
 Œì¬•¬ª tests/lib/security/document-e2ee.test.ts:30:38

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[28/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/document-e2ee.test.ts > document-e2ee Phase 1 > wrapKey + unwrapKey DEK roundtrip
TypeError: Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.
 Œì¬•¬ª encryptFile src/lib/security/document-e2ee.ts:44:53
     42|   }
     43| 
     44|   const ciphertext = await globalThis.crypto.subtle.encrypt(
       |                                                     ^
     45|     params,
     46|     dek,
 Œì¬•¬ª tests/lib/security/document-e2ee.test.ts:58:29

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[29/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/document-e2ee.test.ts > document-e2ee Phase 1 > tampered ciphertext throws on decryptFile
TypeError: Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.
 Œì¬•¬ª encryptFile src/lib/security/document-e2ee.ts:44:53
     42|   }
     43| 
     44|   const ciphertext = await globalThis.crypto.subtle.encrypt(
       |                                                     ^
     45|     params,
     46|     dek,
 Œì¬•¬ª tests/lib/security/document-e2ee.test.ts:72:38

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[30/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/document-e2ee.test.ts > document-e2ee Phase 1 > different calls produce different IVs
TypeError: Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.
 Œì¬•¬ª encryptFile src/lib/security/document-e2ee.ts:44:53
     42|   }
     43| 
     44|   const ciphertext = await globalThis.crypto.subtle.encrypt(
       |                                                     ^
     45|     params,
     46|     dek,
 Œì¬•¬ª tests/lib/security/document-e2ee.test.ts:81:25

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[31/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/document-e2ee.test.ts > document-e2ee Phase 1 > AAD binding: decryptFile fails with different AAD
TypeError: Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.
 Œì¬•¬ª encryptFile src/lib/security/document-e2ee.ts:44:53
     42|   }
     43| 
     44|   const ciphertext = await globalThis.crypto.subtle.encrypt(
       |                                                     ^
     45|     params,
     46|     dek,
 Œì¬•¬ª tests/lib/security/document-e2ee.test.ts:91:29

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[32/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/document-e2ee.test.ts > document-e2ee Phase 1 > deriveMasterKey same inputs Œì√•√Ü wrap/unwrap works
TypeError: Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.
 Œì¬•¬ª encryptFile src/lib/security/document-e2ee.ts:44:53
     42|   }
     43| 
     44|   const ciphertext = await globalThis.crypto.subtle.encrypt(
       |                                                     ^
     45|     params,
     46|     dek,
 Œì¬•¬ª tests/lib/security/document-e2ee.test.ts:114:29

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[33/87]Œì√Ñ¬ª

 FAIL  tests/lib/security/rate-limit.test.ts > rate-limit > default rate limit constants > should have correct upload limits
AssertionError: expected 60000 to be 3600000 // Object.is equality

- Expected
+ Received

- 3600000
+ 60000

 Œì¬•¬ª tests/lib/security/rate-limit.test.ts:168:42
    166|     it('should have correct upload limits', () => {
    167|       expect(RATE_LIMIT_UPLOAD.maxRequests).toBe(10)
    168|       expect(RATE_LIMIT_UPLOAD.windowMs).toBe(60 * 60 * 1000)
       |                                          ^
    169|     })
    170|   })

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[34/87]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m20 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (32)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m382 passed[39m[22m[2m | [22m[33m10 skipped[39m[90m (479)[39m
[2m   Start at [22m 00:23:34
[2m   Duration [22m 13.53s[2m (transform 1.46s, setup 10.09s, collect 7.58s, tests 18.44s, environment 32.54s, prepare 9.03s)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/lib/vault/VaultContext.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 57[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 43[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 123[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 36[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 41[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 306[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 76[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 12[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 8[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 8[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 15[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 56 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:274:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/56]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/56]Œì√Ñ¬ª

 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Premium banner when owner has Premium tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Basic banner when owner has Basic tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should pass correct owner tier to DocumentViewer for free tier
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should render both Vertrauenspersonen and Familie tabs
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should activate Familie tab when URL hash is #familie
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should switch to Familie tab and fetch family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should display family members after switching to Familie tab
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Premium member should show "Dokumente laden" download button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Basic member should show "Nur Ansicht" view button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Free member should show disabled "Abo erforderlich" button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display correct tier badges for each member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display document counts for family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should open DocumentViewer modal when clicking "Nur Ansicht" for Basic member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should pass correct props to DocumentViewer
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should trigger download when clicking "Dokumente laden" for Premium member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should show loading state while downloading
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/view for Free tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/download for Basic tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should display error state when family members API fails
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show empty state when no family members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show info box when user only has outgoing members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show download access banner when Premium member exists
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show view-only banner when only Basic members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show no access banner when only Free members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Outgoing Members Section > should display outgoing members in separate section
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should render with responsive grid classes
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should stack buttons vertically on mobile
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should open modal with mobile-optimized view mode
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should render modal dialog when viewing documents
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should lazy load DocumentViewer component on demand
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should prefetch family members API for faster tab switch
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª ZugriffPage src/app/(dashboard)/zugriff/page.tsx:103:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[3/56]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (172)[39m
[2m   Start at [22m 10:13:53
[2m   Duration [22m 4.51s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/vault/VaultSetupModal.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 306[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 76[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 12[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 8[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 8[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 15[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 46[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 35[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 115[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 35[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 39[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 25 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:274:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/25]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/25]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (172)[39m
[2m   Start at [22m 10:15:22
[2m   Duration [22m 2.31s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/lib/vault/VaultContext.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 48[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 35[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 128[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 39[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 41[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 333[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 67[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 19[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 9[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 23[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 21[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 15[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 56 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:145:11
    143|   const ctx = useContext(VaultContext)
    144|   if (!ctx) {
    145|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    146|   }
    147|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:274:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/56]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:145:11
    143|   const ctx = useContext(VaultContext)
    144|   if (!ctx) {
    145|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    146|   }
    147|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/56]Œì√Ñ¬ª

 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Premium banner when owner has Premium tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Basic banner when owner has Basic tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should pass correct owner tier to DocumentViewer for free tier
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should render both Vertrauenspersonen and Familie tabs
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should activate Familie tab when URL hash is #familie
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should switch to Familie tab and fetch family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should display family members after switching to Familie tab
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Premium member should show "Dokumente laden" download button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Basic member should show "Nur Ansicht" view button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Free member should show disabled "Abo erforderlich" button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display correct tier badges for each member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display document counts for family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should open DocumentViewer modal when clicking "Nur Ansicht" for Basic member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should pass correct props to DocumentViewer
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should trigger download when clicking "Dokumente laden" for Premium member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should show loading state while downloading
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/view for Free tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/download for Basic tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should display error state when family members API fails
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show empty state when no family members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show info box when user only has outgoing members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show download access banner when Premium member exists
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show view-only banner when only Basic members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show no access banner when only Free members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Outgoing Members Section > should display outgoing members in separate section
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should render with responsive grid classes
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should stack buttons vertically on mobile
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should open modal with mobile-optimized view mode
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should render modal dialog when viewing documents
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should lazy load DocumentViewer component on demand
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should prefetch family members API for faster tab switch
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:145:11
    143|   const ctx = useContext(VaultContext)
    144|   if (!ctx) {
    145|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    146|   }
    147|   return ctx
 Œì¬•¬ª ZugriffPage src/app/(dashboard)/zugriff/page.tsx:103:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[3/56]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (172)[39m
[2m   Start at [22m 10:18:38
[2m   Duration [22m 4.33s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/lib/vault/VaultContext.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 56 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:274:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/56]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/56]Œì√Ñ¬ª

 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Premium banner when owner has Premium tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should show Basic banner when owner has Basic tier
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Banner Display > should pass correct owner tier to DocumentViewer for free tier
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should render both Vertrauenspersonen and Familie tabs
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should activate Familie tab when URL hash is #familie
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should switch to Familie tab and fetch family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tab Navigation Integration > should display family members after switching to Familie tab
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Premium member should show "Dokumente laden" download button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Basic member should show "Nur Ansicht" view button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > Free member should show disabled "Abo erforderlich" button
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display correct tier badges for each member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Tier-Based UI Display in Familie Tab > should display document counts for family members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should open DocumentViewer modal when clicking "Nur Ansicht" for Basic member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab View Documents Interaction > should pass correct props to DocumentViewer
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should trigger download when clicking "Dokumente laden" for Premium member
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Download Documents Interaction > should show loading state while downloading
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/view for Free tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should handle 403 error from /api/family/download for Basic tier owner
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Error Handling > should display error state when family members API fails
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show empty state when no family members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Empty States > should show info box when user only has outgoing members
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show download access banner when Premium member exists
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show view-only banner when only Basic members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Access Level Banners > should show no access banner when only Free members exist
 FAIL  tests/pages/zugriff.test.tsx > ZugriffPage Familie Tab Full Integration > Familie Tab Outgoing Members Section > should display outgoing members in separate section
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should render with responsive grid classes
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Mobile Responsiveness > should stack buttons vertically on mobile
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should open modal with mobile-optimized view mode
 FAIL  tests/pages/zugriff.test.tsx > DocumentViewer Modal Mobile Fullscreen > should render modal dialog when viewing documents
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should lazy load DocumentViewer component on demand
 FAIL  tests/pages/zugriff.test.tsx > Familie Tab Performance > should prefetch family members API for faster tab switch
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª ZugriffPage src/app/(dashboard)/zugriff/page.tsx:103:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[3/56]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (172)[39m
[2m   Start at [22m 10:20:32
[2m   Duration [22m 4.44s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/einstellungen/page.tsx [22m[34mx1 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 797[2mms[22m[39m

[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m92 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:22:42
[2m   Duration [22m 1.72s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/einstellungen/page.tsx [22m[34mx2 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 56[2mms[22m[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows current tier name[39m[32m 37[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows storage usage progress[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and upgrade prompts for free/basic users[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows premium badge for premium users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mrenders tier badge and upgrade prompt in the senior payment card[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and storage progress details for basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mupdates tier info after subscription changes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 7 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows current tier name
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows storage usage progress
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and upgrade prompts for free/basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows premium badge for premium users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > renders tier badge and upgrade prompt in the senior payment card
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and storage progress details for basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > updates tier info after subscription changes
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª EinstellungenPage src/app/(dashboard)/einstellungen/page.tsx:132:17
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/7]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m12 failed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m94 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:22:45
[2m   Duration [22m 974ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/einstellungen/page.tsx [22m[34mx3 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 56[2mms[22m[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows current tier name[39m[32m 37[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows storage usage progress[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and upgrade prompts for free/basic users[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows premium badge for premium users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mrenders tier badge and upgrade prompt in the senior payment card[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and storage progress details for basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mupdates tier info after subscription changes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 7 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows current tier name
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows storage usage progress
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and upgrade prompts for free/basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows premium badge for premium users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > renders tier badge and upgrade prompt in the senior payment card
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and storage progress details for basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > updates tier info after subscription changes
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª EinstellungenPage src/app/(dashboard)/einstellungen/page.tsx:132:17
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/7]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m12 failed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m94 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:23:11
[2m   Duration [22m 1.08s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/einstellungen/page.tsx [22m[34mx4 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 48[2mms[22m[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows current tier name[39m[32m 30[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows storage usage progress[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and upgrade prompts for free/basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows premium badge for premium users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mrenders tier badge and upgrade prompt in the senior payment card[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and storage progress details for basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mupdates tier info after subscription changes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 7 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows current tier name
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows storage usage progress
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and upgrade prompts for free/basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows premium badge for premium users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > renders tier badge and upgrade prompt in the senior payment card
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and storage progress details for basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > updates tier info after subscription changes
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª EinstellungenPage src/app/(dashboard)/einstellungen/page.tsx:132:17
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/7]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m12 failed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m94 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:23:27
[2m   Duration [22m 975ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/einstellungen/page.tsx [22m[34mx5 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 51[2mms[22m[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows current tier name[39m[32m 32[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows storage usage progress[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and upgrade prompts for free/basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows premium badge for premium users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mrenders tier badge and upgrade prompt in the senior payment card[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and storage progress details for basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mupdates tier info after subscription changes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 7 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows current tier name
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows storage usage progress
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and upgrade prompts for free/basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows premium badge for premium users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > renders tier badge and upgrade prompt in the senior payment card
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and storage progress details for basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > updates tier info after subscription changes
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª EinstellungenPage src/app/(dashboard)/einstellungen/page.tsx:132:17
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/7]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m12 failed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m94 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:23:42
[2m   Duration [22m 991ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/einstellungen/page.tsx [22m[34mx6 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 44[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 117[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 51[2mms[22m[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows current tier name[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows storage usage progress[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and upgrade prompts for free/basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows premium badge for premium users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mrenders tier badge and upgrade prompt in the senior payment card[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and storage progress details for basic users[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mupdates tier info after subscription changes[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 7 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows current tier name
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows storage usage progress
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and upgrade prompts for free/basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows premium badge for premium users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > renders tier badge and upgrade prompt in the senior payment card
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and storage progress details for basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > updates tier info after subscription changes
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª EinstellungenPage src/app/(dashboard)/einstellungen/page.tsx:132:17
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/7]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m12 failed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m94 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:23:50
[2m   Duration [22m 931ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/vault/VaultSetupModal.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 61[2mms[22m[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows current tier name[39m[32m 37[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows storage usage progress[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and upgrade prompts for free/basic users[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows premium badge for premium users[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mrenders tier badge and upgrade prompt in the senior payment card[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mshows tier limits and storage progress details for basic users[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Einstellungen Tier Display[2m > [22mupdates tier info after subscription changes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 50[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 37[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 124[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 39[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 32 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:274:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/32]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/32]Œì√Ñ¬ª

 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows current tier name
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows storage usage progress
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and upgrade prompts for free/basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows premium badge for premium users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > renders tier badge and upgrade prompt in the senior payment card
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > shows tier limits and storage progress details for basic users
 FAIL  tests/pages/einstellungen-tier.test.tsx > Einstellungen Tier Display > updates tier info after subscription changes
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª EinstellungenPage src/app/(dashboard)/einstellungen/page.tsx:132:17
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[3/32]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m12 failed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m94 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:26:22
[2m   Duration [22m 3.87s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mtests/pages/einstellungen-tier.test.tsx [22m[34mx8 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 50[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 37[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 124[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 39[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 752[2mms[22m[39m

[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m92 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 10:35:55
[2m   Duration [22m 1.45s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/app/(dashboard)/notfall/page.tsx [22m[34mx6 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 124[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 39[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 40[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 29[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 3 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:273:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/3]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (172)[39m
[2m   Start at [22m 12:04:22
[2m   Duration [22m 8.73s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/types/database.ts [22m[34mx6 [34m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 29[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 104[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 29[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 37[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 22 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/22]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[90m (11)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m85 passed[39m[22m[90m (172)[39m
[2m   Start at [22m 12:04:46
[2m   Duration [22m 1.51s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/vault/VaultSetupModal.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 40[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 30[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 108[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 30[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 38[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 837[2mms[22m[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 25 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:273:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/25]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/25]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m92 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 12:06:53
[2m   Duration [22m 4.01s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/vault/VaultSetupModal.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 38[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 28[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 105[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 32[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 33[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 789[2mms[22m[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 25 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:273:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/25]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/25]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m92 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 12:07:10
[2m   Duration [22m 3.86s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/components/vault/VaultSetupModal.tsx [22m[39m

 [31mŒì¬•¬ª[39m tests/integration/debug-tools-flow.test.tsx [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 1369[2mms[22m[39m
[31m   [31m‚îú√π[31m Debug Tools Integration Flow[2m > [22mwalks through abo and admin debug tools flow[39m[33m 1366[2mms[22m[39m
[31m     Œì√•√Ü expected "warn" to be called with arguments: [ StringContaining{Œì√á¬™} ][90m

Number of calls: [1m0[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"max-w-5xl mx-auto space-y-8"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center space-y-4"[31m
        [36m>[31m
          [36m<h1[31m
            [33mclass[31m=[32m"text-3xl md:text-4xl font-serif font-semibold text-warmgray-900"[31m
          [36m>[31m
            [0mWelcher Tarif passt zu Ihnen?[0m
          [36m</h1>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-xl text-warmgray-600 max-w-2xl mx-auto"[31m
          [36m>[31m
            [0mAlle Tarife sind transparent und fair. Sie k‚îú‚ï¢nnen jederzeit wechseln oder k‚îú‚ïùndigen.[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"rounded-lg border-2 shadow-md border-sage-200 bg-sage-50"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"card-content p-6 pt-6"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"w-12 h-12 rounded-full bg-sage-600 flex items-center justify-center"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33maria-hidden[31m=[32m"true"[31m
                    [33mclass[31m=[32m"lucide lucide-crown w-6 h-6 text-white"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mheight[31m=[32m"24"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                    [33mwidth[31m=[32m"24"[31m
                    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M5 21h14"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</div>[31m
                [36m<div>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"font-semibold text-warmgray-900"[31m
                  [36m>[31m
                    [0mBasis aktiv[0m
                  [36m</p>[31m
                  [36m<p[31m
                    [33mclass[31m=[32m"text-sm text-warmgray-600"[31m
                  [36m>[31m
                    [0mN‚îú√±chste Zahlung[0m
                    [0m: [0m
                    [0m20.1.2026[0m
                  [36m</p>[31m
                [36m</div>[31m
              [36m</div>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md text-base font-medium transition-colors focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-4 disabled:pointer-events-none disabled:opacity-50 border-2 border-sage-300 bg-transparent text-sage-700 hover:bg-sage-50 hover:border-sage-400 h-14 px-7 py-3.5"[31m
              [36m>[31m
                [0mAbo verwalten[0m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex justify-center"[31m
        [36m>[31m
          [36m<div[31m
            [33mdata-orientation[31m=[32m"horizontal"[31m
            [33mdir[31m=[32m"ltr"[31m
          [36m>[31m
            [36m<div[31m
              [33maria-orientation[31m=[32m"horizontal"[31m
              [33mclass[31m=[32m"h-12 items-center justify-center rounded-lg bg-warmgray-100 p-1 text-warmgray-500 grid w-[300px] grid-cols-2"[31m
              [33mdata-orientation[31m=[32m"horizontal"[31m
              [33mrole[31m=[32m"tablist"[31m
              [33mstyle[31m=[32m"outline: none;"[31m
              [33mtabindex[31m=[32m"0"[31m
            [36m>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-monthly"[31m
                [33maria-selected[31m=[32m"true"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"active"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-monthly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mMonatlich[0m
              [36m</button>[31m
              [36m<button[31m
                [33maria-controls[31m=[32m"radix-_r_3_-content-yearly"[31m
                [33maria-selected[31m=[32m"false"[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-base font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-sage-700 data-[state=active]:shadow-sm relative"[31m
                [33mdata-orientation[31m=[32m"horizontal"[31m
                [33mdata-radix-collection-item[31m=[32m""[31m
                [33mdata-state[31m=[32m"inactive"[31m
                [33mid[31m=[32m"radix-_r_3_-trigger-yearly"[31m
                [33mrole[31m=[32m"tab"[31m
                [33mtabindex[31m=[32m"-1"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mJ‚îú√±hrlich[0m
                [36m<span[31m
                  [33mclass[31m=[32m"absolute -top-2 -right-2 px-1.5 py-0.5 text-[10px] font-bold rounded-full bg-green-50...[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-stats.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 4073[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mdenies access to non-admin users[39m[33m 1029[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Zugriff verweigert. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrenders platform statistics[39m[33m 1016[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows loading spinner while fetching data[39m[32m 8[2mms[22m[39m
[31m     Œì√•√Ü [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
Received has type:  Null
Received has value: [31mnull[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mshows error state when stats fail to load[39m[33m 1005[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Statistiken konnten nicht geladen werden/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin Dashboard Stats[2m > [22mrefresh button updates statistics[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Admin Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/pages/admin-users.test.tsx [2m([22m[2m6 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[33m 6096[2mms[22m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mrenders user management table with all columns[39m[33m 1026[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mfilters users by search query[39m[33m 1018[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows subscription and onboarding badges[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mformats storage values and dates correctly[39m[33m 1011[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mupdates role when dropdown changes[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m Admin User Management[2m > [22mshows empty state when no users found[39m[33m 1012[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: Benutzerverwaltung. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div />[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/components/privacy-policy-update-content.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 70[2mms[22m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render without errors[39m[32m 56[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /Stand:/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould render all sections[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: 1. Verantwortlicher. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31m‚îú√π[31m PrivacyPolicyUpdateContent[2m > [22mshould display contact information[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü Unable to find an element with the text: /datenschutz@lebensordner.org/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"prose prose-warmgray max-w-none"[31m
    [36m>[31m
      [36m<h2[31m
        [33mclass[31m=[32m"text-xl font-semibold text-warmgray-900 mt-8 mb-4"[31m
      [36m>[31m
        [0mWichtige ‚îú√§nderungen[0m
      [36m</h2>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mWir haben unsere Datenschutzerkl‚îú√±rung aktualisiert, um transparenter darzustellen, wie wir Daten verarbeiten und welche Rechte Ihnen zustehen. Hier sind die wichtigsten Punkte:[0m
      [36m</p>[31m
      [36m<ul[31m
        [33mclass[31m=[32m"list-disc pl-6 text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<li>[31m
          [0mKlarstellung der Rechtsgrundlagen f‚îú‚ïùr zentrale Verarbeitungen[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mAktualisierung der Auftragsverarbeiter-Liste und Standorte[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mPr‚îú√±zisierung der Speicherfristen f‚îú‚ïùr unterschiedliche Datenkategorien[0m
        [36m</li>[31m
        [36m<li>[31m
          [0mErg‚îú√±nzung von Hinweisen zu Sicherheitsprotokollen und Protokollierung[0m
        [36m</li>[31m
      [36m</ul>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-6"[31m
      [36m>[31m
        [36m<a[31m
          [33mclass[31m=[32m"text-sage-600 hover:text-sage-700"[31m
          [33mhref[31m=[32m"/datenschutz"[31m
        [36m>[31m
          [0mVollst‚îú√±ndige Datenschutzerkl‚îú√±rung anzeigen[0m
        [36m</a>[31m
      [36m</p>[31m
      [36m<h3[31m
        [33mclass[31m=[32m"text-lg font-semibold text-warmgray-900 mt-8 mb-3"[31m
      [36m>[31m
        [0mKontakt[0m
      [36m</h3>[31m
      [36m<p[31m
        [33mclass[31m=[32m"text-warmgray-700 mb-4"[31m
      [36m>[31m
        [0mVerantwortlich f‚îú‚ïùr die Datenverarbeitung:[0m
        [36m<br />[31m
        [0mChristof Boermel[0m
        [36m<br />[31m
        [0mLehmbrookweg 2[0m
        [36m<br />[31m
        [0m22159 Hamburg[0m
        [36m<br />[31m
        [0mE-Mail: matbo@matsbusiness.co.site[0m
        [36m<br />[31m
        [0mTelefon: +49 172 7553584[0m
      [36m</p>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
 [31mŒì¬•¬ª[39m tests/integration/account-lockout-bypass.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 49[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould return 403 when locked account attempts login with correct credentials[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLocked account blocks authentication[2m > [22mshould NOT call supabase.auth.signInWithPassword for a locked account[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mLockout persistence across multiple attempts[2m > [22mshould remain locked on consecutive login attempts[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould allow login after account is unlocked[39m[32m 12[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mUnlock then successful login[2m > [22mshould reset failure count on successful login after unlock[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'locked-user@example.com' ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mFull lockout-to-unlock lifecycle[2m > [22mshould block login when locked, then allow after unlock[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould allow login for an account that was never locked[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
   [32mŒì¬£√¥[39m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould include "Account locked" in 403 response body[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m Account Lockout Bypass Prevention - Integration[2m > [22mEdge cases[2m > [22mshould isolate lockout to the specific email address[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü expected 500 to be 200 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/lib/consent/manager.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mrecordConsent[2m > [22mshould insert consent ledger record with correct parameters[32m 5[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgetConsentHistory[2m > [22mshould return consent records ordered by timestamp[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgetCurrentConsent[2m > [22mshould return latest consent for specific type[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü expected "spy" to be called with arguments: [ 'timestamp', { ascending: false } ][90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return true when health_data_consent_granted is true[39m[32m 5[2mms[22m[39m
[31m     Œì√•√Ü expected false to be true // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when health_data_consent_granted is false[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false when profile not found[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü expected true to be false // Object.is equality[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mhasHealthDataConsent[2m > [22mshould return false on database error[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould insert consent ledger record with granted=true[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould update profiles.health_data_consent_granted to true[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould set health_data_consent_timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on ledger insert failure[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m consent manager[2m > [22mgrantHealthDataConsent[2m > [22mshould return {ok: false, error} on profile update failure[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü expected { ok: true } to deeply equal { ok: false, Œì√á¬™(1) }[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould insert consent ledger record with granted=false[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould use CONSENT_VERSION from constants[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: true} on success[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m consent manager[2m > [22mwithdrawHealthDataConsent[2m > [22mshould return {ok: false, error} on failure[32m 1[2mms[22m[39m
 [31mŒì¬•¬ª[39m tests/lib/security/document-e2ee.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m6 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateDEK returns a CryptoKey[32m 4[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mencryptFile + decryptFile roundtrip[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mencryptField + decryptField roundtrip[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mwrapKey + unwrapKey DEK roundtrip[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mtampered ciphertext throws on decryptFile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mdifferent calls produce different IVs[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mAAD binding: decryptFile fails with different AAD[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
   [32mŒì¬£√¥[39m document-e2ee Phase 1[2m > [22mgenerateRecoveryKey returns 64-char hex[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m document-e2ee Phase 1[2m > [22mderiveMasterKey same inputs Œì√•√Ü wrap/unwrap works[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü Failed to execute 'encrypt' on 'SubtleCrypto': 3rd argument is not instance of ArrayBuffer, Buffer, TypedArray, or DataView.[39m
 [31mŒì¬•¬ª[39m tests/lib/security/rate-limit.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 24[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould allow first request when no existing record[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould block request when limit exceeded[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct remaining count[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould calculate correct resetAt timestamp[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcheckRateLimit[2m > [22mshould return allowed=true on database failure (fail-open)[32m 3[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould create new record on first call[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould increment existing record[32m 2[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mincrementRateLimit[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould delete old records and return count[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mcleanupExpiredLimits[2m > [22mshould handle database errors gracefully[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct login limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct password reset limits[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct API limits[32m 0[2mms[22m[39m
[31m   [31m‚îú√π[31m rate-limit[2m > [22mdefault rate limit constants[2m > [22mshould have correct upload limits[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü expected 60000 to be 3600000 // Object.is equality[39m
 [31mŒì¬•¬ª[39m tests/pages/zugriff.test.tsx [2m([22m[2m83 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[33m 350[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" when user has active premium subscription[32m 83[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for yearly premium subscription[32m 13[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mPremium User Display[2m > [22mshould display "Premium" for trialing premium subscription[32m 10[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mBasic User Display[2m > [22mshould display "Basis" when user has active basic subscription[32m 22[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when user has no subscription[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mFree User Display[2m > [22mshould display "Kostenlos" when subscription is canceled[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is null but subscription is active (safe default)[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Zugriff Page Tier Display Integration[2m > [22mEdge Cases[2m > [22mshould display "Basis" when price ID is unrecognized but subscription is active[32m 16[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium subscription should NOT display as Basis[32m 17[2mms[22m[39m
   [32mŒì¬£√¥[39m Premium Subscription Bug Reproduction[2m > [22mCRITICAL: Premium yearly subscription should NOT display as Basis[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mPremium tier should allow family downloads[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mBasic tier should have limited access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Tier Feature Verification[2m > [22mFree tier should have no family dashboard access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould prevent Free users from adding trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould show upgrade message for Free users[32m 14[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Basic users to add trusted persons[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould allow Premium users to add trusted persons[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Basic users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Free User Invitation Blocking[2m > [22mshould block Premium users at their limit[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Integration[2m > [22mshould show Familie tab alongside Vertrauenspersonen tab[32m 15[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mPremium members should have canDownload=true in tier config[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mBasic members should have viewOnly=true in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mFree members should have no access in tier config[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based Actions[2m > [22mshould correctly filter incoming and outgoing members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have correct document structure for viewing[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Viewer[2m > [22mshould have category names mapping[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mobile Responsiveness[2m > [22mshould have responsive class names for grid layouts[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mshould have docsCount property on family members[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mPremium member should have docsCount of 5[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mBasic member should have docsCount of 3[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Document Count[2m > [22mFree member should have docsCount of 0[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mFree tier members should show disabled "Abo erforderlich" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mBasic tier members should show "Nur Ansicht" button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mPremium tier members should show "Dokumente laden" download button[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Tier-Based UI[2m > [22mshould correctly map tier to action behavior[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for unauthorized access (no relationship)[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for pending invitation[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab API 403 Error Handling[2m > [22mshould handle 403 error for inactive relationship[32m 1[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab DocumentViewer Modal[2m > [22mDocumentViewer should support viewMode="modal"[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Premium banner when owner has Premium tier[39m[32m 20[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould show Basic banner when owner has Basic tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Banner Display[2m > [22mshould pass correct owner tier to DocumentViewer for free tier[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould display correct tier badges for each member[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie Tab Mixed Tier Display[2m > [22mshould show docsCount in family member cards[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Premium tier for downloads[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Basic tier for view-only[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould correctly identify Free tier with no access[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Premium[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return correct tier from subscription data - Basic[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for canceled subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m Familie API Security Logic[2m > [22mshould return free tier for null subscription[32m 0[2mms[22m[39m
   [32mŒì¬£√¥[39m VP Dashboard Redirect[2m > [22mshould redirect /vp-dashboard to /zugriff#familie[32m 2[2mms[22m[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould render both Vertrauenspersonen and Familie tabs[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould activate Familie tab when URL hash is #familie[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould switch to Familie tab and fetch family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTab Navigation Integration[2m > [22mshould display family members after switching to Familie tab[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mPremium member should show "Dokumente laden" download button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mBasic member should show "Nur Ansicht" view button[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mFree member should show disabled "Abo erforderlich" button[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display correct tier badges for each member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mTier-Based UI Display in Familie Tab[2m > [22mshould display document counts for family members[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould open DocumentViewer modal when clicking "Nur Ansicht" for Basic member[39m[32m 6[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab View Documents Interaction[2m > [22mshould pass correct props to DocumentViewer[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould trigger download when clicking "Dokumente laden" for Premium member[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Download Documents Interaction[2m > [22mshould show loading state while downloading[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/view for Free tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould handle 403 error from /api/family/download for Basic tier owner[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Error Handling[2m > [22mshould display error state when family members API fails[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show empty state when no family members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Empty States[2m > [22mshould show info box when user only has outgoing members[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show download access banner when Premium member exists[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show view-only banner when only Basic members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Access Level Banners[2m > [22mshould show no access banner when only Free members exist[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m ZugriffPage Familie Tab Full Integration[2m > [22mFamilie Tab Outgoing Members Section[2m > [22mshould display outgoing members in separate section[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould render with responsive grid classes[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Mobile Responsiveness[2m > [22mshould stack buttons vertically on mobile[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould open modal with mobile-optimized view mode[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m DocumentViewer Modal Mobile Fullscreen[2m > [22mshould render modal dialog when viewing documents[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould lazy load DocumentViewer component on demand[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
   [32mŒì¬£√¥[39m Familie Tab Performance[2m > [22mshould memoize family member lists correctly[32m 1[2mms[22m[39m
[31m   [31m‚îú√π[31m Familie Tab Performance[2m > [22mshould prefetch family members API for faster tab switch[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/notfall-consent.test.tsx [2m([22m[2m3 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 39[2mms[22m[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mskips /api/notfall before consent and shows modal[39m[32m 29[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mshows consent modal on 403 response from /api/notfall[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Notfall Page Consent Flow[2m > [22mfetches /api/notfall after consent is granted[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [31mŒì¬•¬ª[39m tests/pages/dokumente.test.tsx [2m([22m[2m22 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 111[2mms[22m[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht Upgrade-Hinweis bei Ablaufdatum[39m[32m 36[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User sieht keine Watcher-Auswahl[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 3[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User sieht Watcher-Auswahl bei Ablaufdatum[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mBasic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mPremium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Notification API wird nach erfolgreichem Upload aufgerufen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mDokument wird mit korrekter reminder_watcher_id gespeichert[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User Insert setzt reminder_watcher_id auf null[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mClient-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Select ist auf Mobile nutzbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpgrade-Hinweis ist auf Mobile lesbar[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mUpload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Upgrade von Free auf Basic zeigt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Downgrade von Basic auf Free versteckt Watcher-Auswahl[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mLeere Familienmitglied-Liste versteckt Watcher-Auswahl[39m[32m 4[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mWatcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFamilienmitglieder werden nur einmal geladen[39m[32m 2[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mTier-Updates verursachen keine erneute Familienmitglieder-Abfrage[39m[32m 1[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
[31m   [31m‚îú√π[31m Dokumente Upload - Reminder Watcher Tier Gate[2m > [22mFree-User kann manipulierte Watcher-ID nicht speichern[39m[32m 34[2mms[22m[39m
[31m     Œì√•√Ü useVault must be used within VaultProvider[39m
 [32mŒì¬£√¥[39m tests/pages/einstellungen-tier.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 797[2mms[22m[39m

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª Failed Tests 25 Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª

 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > skips /api/notfall before consent and shows modal
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > shows consent modal on 403 response from /api/notfall
 FAIL  tests/pages/notfall-consent.test.tsx > Notfall Page Consent Flow > fetches /api/notfall after consent is granted
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª NotfallPage src/app/(dashboard)/notfall/page.tsx:273:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[1/25]Œì√Ñ¬ª

 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht Upgrade-Hinweis bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User sieht keine Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User sieht Watcher-Auswahl bei Ablaufdatum
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt ohne Ablaufdatum verborgen (alle Tiers)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl bleibt bei fehlenden Familienmitgliedern verborgen (Basic/Premium)
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Basic-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Premium-User kann Watcher ausw‚îú√±hlen und Dokument hochladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Notification API wird nach erfolgreichem Upload aufgerufen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Dokument wird mit korrekter reminder_watcher_id gespeichert
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User Insert setzt reminder_watcher_id auf null
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Client-Gate verhindert Watcher-Auswahl f‚îú‚ïùr Free-User
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Select ist auf Mobile nutzbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upgrade-Hinweis ist auf Mobile lesbar
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Upload-Dialog ist auf Mobile vollho‚ï†√™he (h-[100dvh])
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Upgrade von Free auf Basic zeigt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Downgrade von Basic auf Free versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Leere Familienmitglied-Liste versteckt Watcher-Auswahl
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Watcher-Auswahl wird zur‚îú‚ïùckgesetzt, wenn Ablaufdatum gel‚îú‚ï¢scht wird
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Familienmitglieder werden nur einmal geladen
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Tier-Updates verursachen keine erneute Familienmitglieder-Abfrage
 FAIL  tests/pages/dokumente.test.tsx > Dokumente Upload - Reminder Watcher Tier Gate > Free-User kann manipulierte Watcher-ID nicht speichern
Error: useVault must be used within VaultProvider
 Œì¬•¬ª useVault src/lib/vault/VaultContext.tsx:146:11
    144|   const ctx = useContext(VaultContext)
    145|   if (!ctx) {
    146|     throw new Error('useVault must be used within VaultProvider')
       |           ^
    147|   }
    148|   return ctx
 Œì¬•¬ª DocumentsPage src/app/(dashboard)/dokumente/page.tsx:247:24
 Œì¬•¬ª Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 Œì¬•¬ª renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 Œì¬•¬ª updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 Œì¬•¬ª beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 Œì¬•¬ª runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 Œì¬•¬ª performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 Œì¬•¬ª workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 Œì¬•¬ª renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

Œì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ªŒì√Ñ¬ª[2/25]Œì√Ñ¬ª


[2m Test Files [22m [1m[31m11 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (12)[39m
[2m      Tests [22m [1m[31m87 failed[39m[22m[2m | [22m[1m[32m92 passed[39m[22m[90m (179)[39m
[2m   Start at [22m 12:08:43
[2m   Duration [22m 4.03s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
