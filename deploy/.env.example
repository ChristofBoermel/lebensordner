# ============================================
# Domain
# ============================================
DOMAIN=lebensordner.org
SITE_URL=https://lebensordner.org
API_EXTERNAL_URL=https://lebensordner.org/supabase
ACME_EMAIL=admin@lebensordner.org

# ============================================
# PostgreSQL
# ============================================
POSTGRES_PASSWORD=your-super-secret-postgres-password

# ============================================
# Supabase JWT (generate with: openssl rand -hex 32)
# ============================================
JWT_SECRET=your-jwt-secret-at-least-32-characters

# Generated JWT tokens using JWT_SECRET above
# Use https://supabase.com/docs/guides/self-hosting/docker#generate-api-keys
ANON_KEY=your-generated-anon-key
SERVICE_ROLE_KEY=your-generated-service-role-key

# ============================================
# Supabase URLs (for Next.js app)
# ============================================
NEXT_PUBLIC_SUPABASE_URL=https://lebensordner.org/supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=same-as-ANON_KEY-above

# ============================================
# Supabase Auth (GoTrue)
# ============================================
DISABLE_SIGNUP=false
ENABLE_EMAIL_AUTOCONFIRM=false
ADDITIONAL_REDIRECT_URLS=

# SMTP for Supabase Auth emails (confirmation, password reset)
SMTP_HOST=smtp.resend.com
SMTP_PORT=587
SMTP_USER=resend
SMTP_PASS=your-resend-api-key
SMTP_ADMIN_EMAIL=noreply@lebensordner.org

# ============================================
# Encryption (keep your existing key!)
# ============================================
ENCRYPTION_KEY=your-existing-64-char-hex-encryption-key

# ============================================
# Stripe
# ============================================
STRIPE_SECRET_KEY=sk_live_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_xxx

# ============================================
# Email (Resend)
# ============================================
RESEND_API_KEY=re_xxx

# ============================================
# SMS (Twilio) - optional
# ============================================
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
TWILIO_SENDER_ID= # Optional — used as alphanumeric sender ID for SMS reminders

# ============================================
# Cloudflare Turnstile (CAPTCHA)
# ============================================
TURNSTILE_SECRET_KEY=your-turnstile-secret
NEXT_PUBLIC_TURNSTILE_SITE_KEY=your-turnstile-site-key

# ============================================
# PostHog Analytics
# ============================================
NEXT_PUBLIC_POSTHOG_KEY=your-posthog-key
NEXT_PUBLIC_POSTHOG_HOST=https://eu.i.posthog.com

# ============================================
# Cron Secret (for manual cron triggers)
# ============================================
CRON_SECRET=your-cron-secret

# ============================================
# Redis
# ============================================
REDIS_PASSWORD=your-redis-password
REDIS_URL=redis://:your-url-encoded-password@redis:6379
# Note: URL-encode special chars in password (e.g. ? → %3F, @ → %40, # → %23)

# ============================================
# App Config
# ============================================
NEXT_PUBLIC_APP_URL=https://lebensordner.org
NEXT_PUBLIC_PRIVACY_POLICY_VERSION=v1.0.0

# ============================================
# Supabase Studio (admin UI)
# ============================================
STUDIO_USER=admin
STUDIO_PASSWORD_HASH=your-bcrypt-hashed-password
# Note: escape '$' as '$$' in .env for docker-compose interpolation safety.

# ============================================
# Grafana
# ============================================
GRAFANA_ADMIN_PASSWORD=your-grafana-admin-password
GRAFANA_USER=grafana
# Generate with: docker run --rm caddy:2-alpine caddy hash-password --plaintext 'your-strong-password'
GRAFANA_PASSWORD_HASH=your-caddy-bcrypt-hash
# Note: escape '$' as '$$' in .env for docker-compose interpolation safety.

# ============================================
# Metrics (Prometheus scrape endpoint)
# ============================================
METRICS_SECRET=your-metrics-secret-here

# ============================================
# Telegram (Grafana Alerts)
# ============================================
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=your-telegram-chat-id

# ============================================
# Error Observability & AI-Fix Pipeline
# ============================================

# Shared secret for authenticating Grafana → Next.js webhook calls (X-Grafana-Webhook-Secret header).
# Generate with: openssl rand -hex 32
GRAFANA_WEBHOOK_SECRET=your-grafana-webhook-secret

# Secret token for authenticating Telegram → Next.js callback calls (X-Telegram-Bot-Api-Secret-Token header).
# Set this before registering the bot webhook. Generate with: openssl rand -hex 32
TELEGRAM_WEBHOOK_SECRET=your-telegram-webhook-secret

# GitHub fine-grained Personal Access Token with issues:write scope on the lebensordner repo only.
# Used to create GitHub issues from Telegram bot callbacks.
GITHUB_PAT=github_pat_xxx

# Internal Docker network URL for Loki (used by Next.js app inside the Docker network).
LOKI_INTERNAL_URL=http://loki:3100

# Target GitHub repo for issue creation (owner/repo format).
GITHUB_REPO=christofboermel/lebensordner
