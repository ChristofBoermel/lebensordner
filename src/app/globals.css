@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 40 33% 98%;
    --foreground: 30 10% 20%;
    --card: 40 30% 99%;
    --card-foreground: 30 10% 20%;
    --popover: 40 30% 99%;
    --popover-foreground: 30 10% 20%;
    --primary: 120 12% 42%;
    --primary-foreground: 40 33% 98%;
    --secondary: 30 12% 92%;
    --secondary-foreground: 30 10% 30%;
    --muted: 30 12% 94%;
    --muted-foreground: 30 8% 45%;
    --accent: 120 12% 94%;
    --accent-foreground: 120 12% 30%;
    --destructive: 0 65% 50%;
    --destructive-foreground: 0 0% 100%;
    --border: 30 15% 85%;
    --input: 30 15% 85%;
    --ring: 120 12% 42%;
    --radius: 0.625rem;
  }

  .dark {
    --background: 220 15% 8%;
    --foreground: 40 15% 95%;
    --card: 220 15% 11%;
    --card-foreground: 40 15% 95%;
    --popover: 220 15% 11%;
    --popover-foreground: 40 15% 95%;
    --primary: 120 25% 55%;
    --primary-foreground: 220 15% 8%;
    --secondary: 220 10% 16%;
    --secondary-foreground: 40 15% 90%;
    --muted: 220 10% 16%;
    --muted-foreground: 40 10% 65%;
    --accent: 120 15% 18%;
    --accent-foreground: 120 25% 75%;
    --destructive: 0 65% 55%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 10% 18%;
    --input: 220 10% 18%;
    --ring: 120 25% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    font-size: 17px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* Font size variants for accessibility */
  html.font-normal {
    font-size: 17px;
  }

  html.font-large {
    font-size: 20px;
  }

  html.font-xlarge {
    font-size: 24px;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    overflow-x: hidden;
    max-width: 100vw;
  }

  *:focus-visible {
    @apply outline-none ring-2 ring-sage-500 ring-offset-2 ring-offset-background;
  }

  a {
    @apply text-sage-600 hover:text-sage-700 transition-colors;
  }

  button,
  [role="button"],
  input[type="submit"],
  input[type="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  input:not([type="checkbox"]):not([type="radio"]),
  textarea,
  select {
    @apply text-base;
    min-height: 48px;
  }

  /* Date input styling - calendar icon to the right, text left-aligned */
  input[type="date"] {
    position: relative;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  /* Hide default date input internal styling and use custom layout */
  input[type="date"]::-webkit-datetime-edit {
    padding-left: 0;
  }

  input[type="date"]::-webkit-datetime-edit-fields-wrapper {
    padding-left: 0;
  }

  input[type="date"]::-webkit-calendar-picker-indicator {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    opacity: 0.6;
    padding: 4px;
    width: 20px;
    height: 20px;
  }

  input[type="date"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  /* Firefox date input */
  input[type="date"]::-moz-calendar-picker-indicator {
    margin-left: auto;
  }
}

@layer components {
  .card-elevated {
    @apply bg-card rounded-lg border border-border shadow-sm;
    box-shadow:
      0 1px 3px 0 rgb(0 0 0 / 0.04),
      0 1px 2px -1px rgb(0 0 0 / 0.04);
  }

  .section-container {
    @apply max-w-5xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .page-header {
    @apply mb-8 pb-6 border-b border-border;
  }

  .category-card {
    @apply card-elevated p-6 transition-all duration-200;
  }

  .category-card:hover {
    @apply shadow-md border-sage-300;
    transform: translateY(-2px);
  }

  .document-item {
    @apply flex items-center justify-between p-4 rounded-lg bg-cream-50 border border-cream-200 transition-colors;
  }

  .document-item:hover {
    @apply bg-cream-100 border-cream-300;
  }

  /* Dark mode component overrides */
  .dark .card-elevated {
    @apply bg-card border-border;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.2);
  }

  .dark .category-card:hover {
    @apply border-sage-600;
  }

  .dark .document-item {
    @apply bg-secondary border-border;
  }

  .dark .document-item:hover {
    @apply bg-muted border-muted-foreground/20;
  }

  /* Dark mode text color overrides */
  .dark .text-warmgray-900 {
    @apply text-foreground;
  }

  .dark .text-warmgray-800 {
    @apply text-foreground/95;
  }

  .dark .text-warmgray-700 {
    @apply text-foreground/90;
  }

  .dark .text-warmgray-600 {
    @apply text-muted-foreground;
  }

  .dark .text-warmgray-500 {
    @apply text-muted-foreground/80;
  }

  /* Dark mode background overrides */
  .dark .bg-cream-50,
  .dark .bg-warmgray-50 {
    @apply bg-secondary;
  }

  .dark .bg-warmgray-100,
  .dark .bg-cream-100 {
    @apply bg-muted;
  }

  .dark .bg-sage-50 {
    @apply bg-accent;
  }

  .dark .bg-sage-100 {
    @apply bg-accent/80;
  }

  /* Dark mode border overrides */
  .dark .border-warmgray-200,
  .dark .border-cream-200,
  .dark .border-warmgray-300 {
    @apply border-border;
  }

  .dark .border-sage-200,
  .dark .border-sage-300 {
    @apply border-sage-700;
  }

  /* Dark mode hover states */
  .dark .hover\:bg-warmgray-50:hover,
  .dark .hover\:bg-warmgray-100:hover {
    @apply bg-muted;
  }

  .dark .hover\:bg-sage-50:hover {
    @apply bg-accent;
  }

  /* Dark mode input styling */
  .dark input,
  .dark textarea,
  .dark select {
    @apply bg-secondary text-foreground border-border;
  }

  .dark input::placeholder,
  .dark textarea::placeholder {
    @apply text-muted-foreground;
  }

  .dark input:focus,
  .dark textarea:focus,
  .dark select:focus {
    @apply border-primary ring-primary/30;
  }

  /* Dark mode for specific status colors */
  .dark .bg-amber-50 {
    @apply bg-amber-950/30;
  }

  .dark .text-amber-600 {
    @apply text-amber-400;
  }

  .dark .border-amber-200 {
    @apply border-amber-800;
  }

  .dark .bg-red-50 {
    @apply bg-red-950/30;
  }

  .dark .text-red-600 {
    @apply text-red-400;
  }

  .dark .text-red-700 {
    @apply text-red-400;
  }

  .dark .border-red-200 {
    @apply border-red-800;
  }

  .dark .bg-green-50 {
    @apply bg-green-950/30;
  }

  .dark .text-green-600 {
    @apply text-green-400;
  }

  .dark .border-green-200 {
    @apply border-green-800;
  }

  .dark .bg-blue-100 {
    @apply bg-blue-950/40;
  }

  .dark .text-blue-600 {
    @apply text-blue-400;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  /* Mobile-specific utilities */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .senior-mode .touch-target {
    min-height: 60px;
    min-width: 60px;
  }

  /* Prevent horizontal overflow */
  .no-overflow-x {
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* Safe area padding for iOS */
  @supports (padding: max(0px)) {
    .safe-area-inset-bottom {
      padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }

    .safe-area-inset-top {
      padding-top: max(1rem, env(safe-area-inset-top));
    }
  }
}

/* =================================================================
   SENIOREN-MODUS (Senior Mode)
   Pure CSS approach - no re-renders, only CSS recalculation
   Applied via .senior-mode class on <html> element
   ================================================================= */

html.senior-mode {
  /* Larger base font size for better readability */
  font-size: 20px;

  /* Improved letter and line spacing */
  letter-spacing: 0.01em;
  line-height: 1.7;
}

/* Senior Mode: Enhanced typography */
.senior-mode body {
  line-height: 1.8;
}

.senior-mode h1,
.senior-mode h2,
.senior-mode h3,
.senior-mode h4 {
  line-height: 1.4;
  letter-spacing: 0.02em;
}

/* Senior Mode: Larger touch targets */
.senior-mode button,
.senior-mode [role="button"],
.senior-mode input[type="submit"],
.senior-mode input[type="button"],
.senior-mode a {
  min-height: 60px;
  min-width: 60px;
}

.senior-mode input:not([type="checkbox"]):not([type="radio"]),
.senior-mode textarea,
.senior-mode select {
  min-height: 56px;
  padding-top: 0.875rem;
  padding-bottom: 0.875rem;
}

/* Senior Mode: Enhanced focus states */
.senior-mode *:focus-visible {
  @apply ring-[3px] ring-offset-4;
}

/* Senior Mode: Larger icons in navigation and buttons */
.senior-mode nav svg,
.senior-mode button svg,
.senior-mode [role="button"] svg {
  width: 1.5rem;
  height: 1.5rem;
}

/* Senior Mode: Enhanced card spacing */
.senior-mode .card-elevated {
  @apply p-6;
}

.senior-mode .category-card {
  @apply p-8;
}

/* Senior Mode: Enhanced button padding */
.senior-mode button,
.senior-mode [role="button"] {
  @apply px-6 py-4;
}

/* Senior Mode: Larger checkbox and radio inputs */
.senior-mode input[type="checkbox"],
.senior-mode input[type="radio"] {
  width: 1.5rem;
  height: 1.5rem;
}

/* =================================================================
   ONBOARDING ACCESSIBILITY MODE
   Applied via .onboarding-accessible class on <html> element
   ================================================================= */

html.onboarding-accessible {
  font-size: 18px;
  letter-spacing: 0.015em;
  line-height: 1.7;
}

.onboarding-accessible body {
  @apply text-warmgray-900;
  line-height: 1.7;
}

.onboarding-accessible h1 {
  font-size: 32px;
  line-height: 1.4;
}

.onboarding-accessible h2 {
  font-size: 28px;
  line-height: 1.4;
}

.onboarding-accessible h3 {
  font-size: 24px;
  line-height: 1.4;
}

.onboarding-accessible *:focus-visible {
  @apply ring-[3px] ring-offset-4 ring-sage-600 ring-offset-background;
}

.onboarding-accessible button,
.onboarding-accessible [role="button"],
.onboarding-accessible input[type="submit"],
.onboarding-accessible input[type="button"],
.onboarding-accessible a {
  min-height: 48px;
  min-width: 48px;
}

.onboarding-accessible input:not([type="checkbox"]):not([type="radio"]),
.onboarding-accessible textarea,
.onboarding-accessible select {
  min-height: 56px;
}

.onboarding-accessible .text-warmgray-600 {
  @apply text-warmgray-800;
}

.onboarding-accessible .text-warmgray-500 {
  @apply text-warmgray-700;
}

.onboarding-accessible .text-sage-600 {
  @apply text-sage-700;
}

.onboarding-accessible .bg-cream-50 {
  @apply bg-white;
}

.onboarding-accessible .border-cream-200,
.onboarding-accessible .border-warmgray-200 {
  @apply border-warmgray-300;
}

.onboarding-accessible .card-content {
  padding: 2rem;
  padding-top: 0;
}

/* =================================================================
   PRINT STYLESHEET
   Clean printing for onboarding and general pages
   ================================================================= */

@media print {
  /* Hide all navigation and UI chrome */
  nav, aside, header, footer,
  .dashboard-nav, .theme-toggle,
  .floating-help-button, .step-feedback-widget,
  button:not(.print-include), .no-print,
  [role="navigation"], [role="banner"],
  .dropdown-menu, .tooltip, .popover {
    display: none !important;
  }

  /* Optimize for print */
  body {
    background: white !important;
    color: black !important;
    font-size: 12pt;
    line-height: 1.5;
  }

  /* Remove decorative elements */
  *, *::before, *::after {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* Ensure proper page breaks */
  .onboarding-step {
    page-break-inside: avoid;
  }

  /* Show URLs for links */
  a[href]:after {
    content: " (" attr(href) ")";
    font-size: 10pt;
    color: #666;
  }

  /* Don't show URL for internal links or buttons */
  a[href^="/"]:after,
  a[href^="#"]:after,
  button a[href]:after {
    content: "";
  }

  /* QR Code sizing for scannability */
  .qr-code, [data-qr-code] {
    width: 4cm !important;
    height: 4cm !important;
    page-break-inside: avoid;
    margin: 1cm auto;
  }

  /* Page breaks */
  .card-elevated, .category-card, section {
    page-break-inside: avoid;
  }

  .page-break {
    page-break-after: always;
  }

  /* Ensure images print correctly */
  img {
    max-width: 100% !important;
  }

  /* Hide fixed/floating elements */
  [class*="fixed"],
  [class*="sticky"] {
    position: static !important;
  }

  /* Print metadata */
  .print-date {
    display: block !important;
    font-size: 10pt;
    color: #666;
    margin-top: 1cm;
  }
}
